(* Content-type: application/mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 7.0' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       145,          7]
NotebookDataLength[    151607,       3616]
NotebookOptionsPosition[    147287,       3478]
NotebookOutlinePosition[    147797,       3497]
CellTagsIndexPosition[    147754,       3494]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{

Cell[CellGroupData[{
Cell["\<\
Modeling by Mark Yeatman
mxy110230@utdallas.edu
Sept 2019\
\>", "Subsubtitle",
 CellChangeTimes->{{3.5111737331439896`*^9, 3.511173737039212*^9}, {
  3.520768651078125*^9, 3.520768659875*^9}, {3.521818801734375*^9, 
  3.521818813484375*^9}, {3.543075080431307*^9, 3.5430750818223066`*^9}, {
  3.555090980418681*^9, 3.5550909814106812`*^9}, {3.5870545444315977`*^9, 
  3.5870545499091454`*^9}, {3.763919879566497*^9, 3.7639199143025894`*^9}, {
  3.7779151244623256`*^9, 3.7779151349803295`*^9}}],

Cell[CellGroupData[{

Cell["Initialization", "Section",
 CellChangeTimes->{{3.587054562815436*^9, 3.5870545683829927`*^9}, 
   3.7639210008236065`*^9, {3.763922322016376*^9, 3.763922332416171*^9}, {
   3.7685736312280703`*^9, 3.768573641896326*^9}, {3.7778182597402086`*^9, 
   3.777818268541385*^9}}],

Cell[BoxData[{
 RowBox[{
  RowBox[{"Off", "[", 
   RowBox[{
    RowBox[{"General", "::", "spell"}], ",", 
    RowBox[{"General", "::", "spell1"}], ",", 
    StyleBox[
     RowBox[{"Get", "::", "noopen"}], "MessageName"], 
    StyleBox[",", "MessageName"], 
    StyleBox[
     RowBox[{"Needs", "::", "nocont"}], "MessageName"]}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Needs", "[", "\"\<Screws`\>\"", "]"}], ";"}], "\n", 
 RowBox[{
  RowBox[{"Needs", "[", "\"\<RobotLinks`\>\"", "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Needs", "[", "\"\<ToMatlab`\>\"", "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"FindFile", "[", "\"\<Screws`\>\"", "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"FindFile", "[", "\"\<RobotLinks`\>\"", "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"FindFile", "[", "\"\<ToMatlab`\>\"", "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"$Assumptions", "=", 
   RowBox[{"_", "\[Element]", "Reals"}]}], ";"}]}], "Input"]
}, Open  ]],

Cell[CellGroupData[{

Cell["Open Chain Kinematics (Heel Reference Frame)", "Section",
 CellChangeTimes->{{3.587054562815436*^9, 3.5870545683829927`*^9}, 
   3.7639210008236065`*^9, {3.763922322016376*^9, 3.763922332416171*^9}, {
   3.779809174261571*^9, 3.779809174824091*^9}}],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"x", "=", " ", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"x1", "[", "t", "]"}], "}"}], ",", 
      RowBox[{"{", 
       RowBox[{"x2", "[", "t", "]"}], "}"}], ",", 
      RowBox[{"{", 
       RowBox[{"x3", "[", "t", "]"}], "}"}], ",", 
      RowBox[{"{", 
       RowBox[{"x4", "[", "t", "]"}], "}"}], ",", 
      RowBox[{"{", 
       RowBox[{"x5", "[", "t", "]"}], "}"}], ",", 
      RowBox[{"{", 
       RowBox[{"x6", "[", "t", "]"}], "}"}], ",", 
      RowBox[{"{", 
       RowBox[{"x7", "[", "t", "]"}], "}"}], ",", 
      RowBox[{"{", 
       RowBox[{"x8", "[", "t", "]"}], "}"}]}], "}"}]}], ";"}], " ", 
  "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{"CoPx", ",", " ", "CoPy", ",", " ", 
    RowBox[{"heel", " ", "angle"}], ",", " ", 
    RowBox[{"ankle", " ", "angle"}], ",", " ", 
    RowBox[{"stance", " ", "knee", " ", "angle"}], ",", " ", 
    RowBox[{"hip", " ", "angle"}], ",", " ", 
    RowBox[{"swing", " ", "knee", " ", "angle"}], ",", " ", 
    RowBox[{"swing", " ", "ankle", " ", "angle"}]}], " ", 
   "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"xdot", " ", "=", " ", 
   RowBox[{"D", "[", 
    RowBox[{"x", ",", "t"}], "]"}]}], ";", " ", 
  RowBox[{"xddot", " ", "=", " ", 
   RowBox[{"D", "[", 
    RowBox[{"xdot", ",", "t"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"l", " ", "=", " ", 
   RowBox[{"la", "+", "ls", "+", "lt"}]}], ";"}]}], "Input",
 CellChangeTimes->{
  3.5111737472017937`*^9, {3.511173782073788*^9, 3.5111737868600616`*^9}, {
   3.5111755940464272`*^9, 3.511175600408791*^9}, {3.520686131703125*^9, 
   3.520686135875*^9}, {3.520686309671875*^9, 3.520686312484375*^9}, {
   3.520687115453125*^9, 3.5206871275625*^9}, {3.52078867884375*^9, 
   3.52078872540625*^9}, {3.520857852828125*^9, 3.520857856765625*^9}, {
   3.521820034578125*^9, 3.52182003665625*^9}, {3.521820194515625*^9, 
   3.52182019925*^9}, {3.521911060609375*^9, 3.52191106496875*^9}, 
   3.5219945113125*^9, {3.523028145328125*^9, 3.523028147203125*^9}, 
   3.523028568734375*^9, {3.523033556203125*^9, 3.5230335580625*^9}, {
   3.52303366240625*^9, 3.523033664046875*^9}, {3.5232996586875*^9, 
   3.523299669890625*^9}, 3.523299712796875*^9, {3.52330022171875*^9, 
   3.523300234421875*^9}, {3.52330028559375*^9, 3.52330029028125*^9}, 
   3.5233008249375*^9, {3.523360415484375*^9, 3.523360421828125*^9}, {
   3.523380309234375*^9, 3.52338031990625*^9}, {3.523380358796875*^9, 
   3.523380364234375*^9}, {3.5287165611401763`*^9, 3.5287165746088295`*^9}, {
   3.543073868103307*^9, 3.543073894812307*^9}, 3.5430739902623067`*^9, {
   3.5430742662443066`*^9, 3.543074273445307*^9}, 3.5430744729683065`*^9, {
   3.5430748729733067`*^9, 3.5430748749423065`*^9}, {3.555095285078673*^9, 
   3.5550952976686726`*^9}, {3.5553255793781047`*^9, 3.555325590112178*^9}, 
   3.5559492285885787`*^9, {3.587054558588013*^9, 3.587054560969251*^9}, {
   3.7639210046785345`*^9, 3.763921006646368*^9}, {3.7639223376326623`*^9, 
   3.7639223408171253`*^9}, {3.7639888827120976`*^9, 3.763988883260669*^9}, {
   3.7639889168895807`*^9, 3.7639889213377137`*^9}}],

Cell[BoxData[{
 RowBox[{
  RowBox[{"ax1", " ", "=", " ", 
   RowBox[{"PrismaticTwist", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"0", ",", "0", ",", "0"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"1", ",", "0", ",", "0"}], "}"}]}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"ax2", " ", "=", " ", 
   RowBox[{"PrismaticTwist", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"0", ",", "0", ",", "0"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"0", ",", "1", ",", "0"}], "}"}]}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"ax3", " ", "=", " ", 
   RowBox[{"RevoluteTwist", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"0", ",", "0", ",", "0"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"0", ",", "0", ",", "1"}], "}"}]}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"ax4", " ", "=", " ", 
   RowBox[{"RevoluteTwist", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"0", ",", "la", ",", "0"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"0", ",", "0", ",", "1"}], "}"}]}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"ax5", " ", "=", " ", 
   RowBox[{"RevoluteTwist", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"0", ",", 
       RowBox[{"la", "+", "ls"}], ",", "0"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"0", ",", "0", ",", "1"}], "}"}]}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"ax6", " ", "=", " ", 
   RowBox[{"RevoluteTwist", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"0", ",", 
       RowBox[{"(", 
        RowBox[{"la", "+", "ls", "+", "lt"}], ")"}], ",", "0"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"0", ",", "0", ",", "1"}], "}"}]}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"ax7", " ", "=", " ", 
   RowBox[{"RevoluteTwist", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"0", ",", 
       RowBox[{"la", "+", "ls"}], ",", "0"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"0", ",", "0", ",", "1"}], "}"}]}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"ax8", " ", "=", " ", 
   RowBox[{"RevoluteTwist", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"0", ",", "la", ",", "0"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"0", ",", "0", ",", "1"}], "}"}]}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"axzero", " ", "=", 
    RowBox[{"{", 
     RowBox[{"0", ",", "0", ",", "0", ",", "0", ",", "0", ",", "0"}], "}"}]}],
    ";"}], "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"MatrixForm", "[", 
   RowBox[{"e1", " ", "=", " ", 
    RowBox[{"TwistExp", "[", 
     RowBox[{"ax1", ",", 
      RowBox[{"x1", "[", "t", "]"}]}], "]"}]}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"MatrixForm", "[", 
   RowBox[{"e2", " ", "=", " ", 
    RowBox[{"TwistExp", "[", 
     RowBox[{"ax2", ",", 
      RowBox[{"x2", "[", "t", "]"}]}], "]"}]}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"MatrixForm", "[", 
   RowBox[{"e3", " ", "=", " ", 
    RowBox[{"TwistExp", "[", 
     RowBox[{"ax3", ",", 
      RowBox[{"x3", "[", "t", "]"}]}], "]"}]}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"MatrixForm", "[", 
   RowBox[{"e4", " ", "=", " ", 
    RowBox[{"TwistExp", "[", 
     RowBox[{"ax4", ",", 
      RowBox[{"x4", "[", "t", "]"}]}], "]"}]}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"MatrixForm", "[", 
   RowBox[{"e5", " ", "=", " ", 
    RowBox[{"TwistExp", "[", 
     RowBox[{"ax5", ",", 
      RowBox[{"x5", "[", "t", "]"}]}], "]"}]}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"MatrixForm", "[", 
   RowBox[{"e6", " ", "=", " ", 
    RowBox[{"TwistExp", "[", 
     RowBox[{"ax6", ",", 
      RowBox[{"x6", "[", "t", "]"}]}], "]"}]}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"MatrixForm", "[", 
   RowBox[{"e7", " ", "=", " ", 
    RowBox[{"TwistExp", "[", 
     RowBox[{"ax7", ",", 
      RowBox[{"x7", "[", "t", "]"}]}], "]"}]}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"MatrixForm", "[", 
   RowBox[{"e8", " ", "=", " ", 
    RowBox[{"TwistExp", "[", 
     RowBox[{"ax8", ",", 
      RowBox[{"x8", "[", "t", "]"}]}], "]"}]}], "]"}], ";"}]}], "Input",
 CellChangeTimes->{{3.520686144890625*^9, 3.520686145203125*^9}, {
   3.52068617653125*^9, 3.520686205625*^9}, {3.520686284921875*^9, 
   3.520686305984375*^9}, {3.520686374484375*^9, 3.520686441609375*^9}, {
   3.52068650903125*^9, 3.520686509140625*^9}, {3.52068656871875*^9, 
   3.520686617546875*^9}, {3.5206873421875*^9, 3.520687418140625*^9}, {
   3.5207688911875*^9, 3.520768891421875*^9}, {3.5208577891875*^9, 
   3.5208577938125*^9}, {3.52182001190625*^9, 3.521820023734375*^9}, {
   3.521911082890625*^9, 3.52191115175*^9}, {3.52191125971875*^9, 
   3.521911294796875*^9}, {3.521911335375*^9, 3.5219113548125*^9}, {
   3.5219119563125*^9, 3.521911956390625*^9}, {3.521994532609375*^9, 
   3.521994535875*^9}, {3.52206939596875*^9, 3.5220694045625*^9}, {
   3.523028084703125*^9, 3.523028115890625*^9}, 3.523028291140625*^9, 
   3.523033323140625*^9, 3.523033450765625*^9, {3.52303353259375*^9, 
   3.5230335539375*^9}, {3.5230373085*^9, 3.52303737340625*^9}, {
   3.523037467328125*^9, 3.52303746903125*^9}, 3.52330047*^9, {
   3.523358999328125*^9, 3.52335906684375*^9}, {3.523360273125*^9, 
   3.523360357953125*^9}, {3.5233608009375*^9, 3.523360804421875*^9}, {
   3.52336423246875*^9, 3.52336423984375*^9}, 3.528716608959394*^9, {
   3.5378114879773455`*^9, 3.5378114882175856`*^9}, {3.539014808319905*^9, 
   3.5390148139360275`*^9}, {3.543073943307307*^9, 3.543074019945307*^9}, {
   3.5430740586903067`*^9, 3.543074064726307*^9}, {3.543075246569307*^9, 
   3.5430752470013065`*^9}, {3.5431422985871916`*^9, 3.543142308314192*^9}, {
   3.5439277592067757`*^9, 3.5439277644517756`*^9}, {3.5439278106917753`*^9, 
   3.5439278108357754`*^9}, {3.5551529968463793`*^9, 3.555153041439379*^9}, {
   3.5553255954747143`*^9, 3.555325607990966*^9}, {3.555949225987579*^9, 
   3.5559492261145787`*^9}, 3.763920382649495*^9, {3.7779154880375853`*^9, 
   3.777915489791995*^9}, {3.7779155558626766`*^9, 3.777915584522359*^9}, {
   3.7779156312055073`*^9, 3.777915668341381*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{"Reference", " ", "Configuration"}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{
   "Position", " ", "Configuration", " ", "of", " ", "Centers", " ", "of", 
    " ", "Mass"}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"gst00", " ", "=", " ", 
     RowBox[{"RPToHomogeneous", "[", 
      RowBox[{
       RowBox[{"IdentityMatrix", "[", "3", "]"}], ",", 
       RowBox[{"{", 
        RowBox[{"0", ",", 
         RowBox[{"la", "/", "2"}], ",", "0"}], "}"}]}], "]"}]}], ";"}], "  ", 
   RowBox[{"(*", 
    RowBox[{"stance", " ", "foot", " ", "CoM", " ", "pos"}], "*)"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"gst01", " ", "=", " ", 
     RowBox[{"RPToHomogeneous", "[", 
      RowBox[{
       RowBox[{"IdentityMatrix", "[", "3", "]"}], ",", 
       RowBox[{"{", 
        RowBox[{"0", ",", 
         RowBox[{"(", 
          RowBox[{"la", "+", 
           RowBox[{"ls", "/", "2"}]}], ")"}], ",", "0"}], "}"}]}], "]"}]}], 
    ";"}], "  ", 
   RowBox[{"(*", 
    RowBox[{"stance", " ", "shank", " ", "CoM", " ", "pos"}], "*)"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"gst02", " ", "=", " ", 
     RowBox[{"RPToHomogeneous", "[", 
      RowBox[{
       RowBox[{"IdentityMatrix", "[", "3", "]"}], ",", 
       RowBox[{"{", 
        RowBox[{"0", ",", 
         RowBox[{"(", 
          RowBox[{"la", "+", "ls", "+", 
           RowBox[{"lt", "/", "2"}]}], ")"}], ",", " ", "0"}], "}"}]}], 
      "]"}]}], ";", "  ", 
    RowBox[{"(*", 
     RowBox[{"stance", " ", "thigh", " ", "CoM", " ", "pos"}], "*)"}], "x"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"gst03", " ", "=", " ", 
     RowBox[{"RPToHomogeneous", "[", 
      RowBox[{
       RowBox[{"IdentityMatrix", "[", "3", "]"}], ",", 
       RowBox[{"{", 
        RowBox[{"0", ",", 
         RowBox[{"la", "+", "ls", "+", "lt"}], ",", "0"}], "}"}]}], "]"}]}], 
    ";"}], "  ", 
   RowBox[{"(*", 
    RowBox[{"hip", " ", "pos"}], "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"gst04", " ", "=", " ", 
     RowBox[{"RPToHomogeneous", "[", 
      RowBox[{
       RowBox[{"IdentityMatrix", "[", "3", "]"}], ",", 
       RowBox[{"{", 
        RowBox[{"0", ",", 
         RowBox[{"(", 
          RowBox[{"la", "+", "ls", "+", 
           RowBox[{"lt", "/", "2"}]}], ")"}], ",", "0"}], "}"}]}], "]"}]}], 
    ";"}], "  ", 
   RowBox[{"(*", 
    RowBox[{"swing", " ", "thigh", " ", "CoM", " ", "pos"}], "*)"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"gst05", " ", "=", " ", 
     RowBox[{"RPToHomogeneous", "[", 
      RowBox[{
       RowBox[{"IdentityMatrix", "[", "3", "]"}], ",", 
       RowBox[{"{", 
        RowBox[{"0", ",", 
         RowBox[{"(", 
          RowBox[{"la", "+", 
           RowBox[{"ls", "/", "2"}]}], ")"}], ",", "0"}], "}"}]}], "]"}]}], 
    ";"}], "  ", 
   RowBox[{"(*", 
    RowBox[{"swing", " ", "shank", " ", "CoM", " ", "pos"}], "*)"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"gst06", " ", "=", " ", 
     RowBox[{"RPToHomogeneous", "[", 
      RowBox[{
       RowBox[{"IdentityMatrix", "[", "3", "]"}], ",", 
       RowBox[{"{", 
        RowBox[{"0", ",", 
         RowBox[{"la", "/", "2"}], ",", "0"}], "}"}]}], "]"}]}], ";"}], "  ", 
   RowBox[{"(*", 
    RowBox[{"swing", " ", "foot", " ", "CoM", " ", "pos"}], "*)"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{"Position", " ", "Configuration", " ", "of", " ", "Joints"}], 
    "*)"}], " ", 
   RowBox[{"(*", 
    RowBox[{
    "With", " ", "Inertial", " ", "Reference", " ", "Frame", " ", "Origin", 
     " ", "at", " ", "stance", " ", "heel"}], "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"gp0", " ", "=", " ", 
     RowBox[{"RPToHomogeneous", "[", 
      RowBox[{
       RowBox[{"IdentityMatrix", "[", "3", "]"}], ",", 
       RowBox[{"{", 
        RowBox[{"lf", ",", "0", ",", "0"}], "}"}]}], "]"}]}], ";"}], "  ", 
   RowBox[{"(*", 
    RowBox[{"stance", " ", "toe", " ", "pos"}], "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"gp1", " ", "=", " ", 
     RowBox[{"RPToHomogeneous", "[", 
      RowBox[{
       RowBox[{"IdentityMatrix", "[", "3", "]"}], ",", 
       RowBox[{"{", 
        RowBox[{"0", ",", "la", ",", "0"}], "}"}]}], "]"}]}], ";"}], "  ", 
   RowBox[{"(*", 
    RowBox[{"stance", " ", "ankle", " ", "pos"}], "*)"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"gp2", " ", "=", " ", 
     RowBox[{"RPToHomogeneous", "[", 
      RowBox[{
       RowBox[{"IdentityMatrix", "[", "3", "]"}], ",", 
       RowBox[{"{", 
        RowBox[{"0", ",", 
         RowBox[{"la", "+", "ls"}], ",", " ", "0"}], "}"}]}], "]"}]}], ";"}], 
   "  ", 
   RowBox[{"(*", 
    RowBox[{"stance", " ", "knee", " ", "pos"}], "*)"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"gp3", " ", "=", " ", 
     RowBox[{"RPToHomogeneous", "[", 
      RowBox[{
       RowBox[{"IdentityMatrix", "[", "3", "]"}], ",", 
       RowBox[{"{", 
        RowBox[{"0", ",", 
         RowBox[{"la", "+", "ls", "+", "lt"}], ",", "0"}], "}"}]}], "]"}]}], 
    ";"}], "  ", 
   RowBox[{"(*", 
    RowBox[{"hip", " ", "pos"}], "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"gp4", " ", "=", " ", 
     RowBox[{"RPToHomogeneous", "[", 
      RowBox[{
       RowBox[{"IdentityMatrix", "[", "3", "]"}], ",", 
       RowBox[{"{", 
        RowBox[{"0", ",", 
         RowBox[{"la", "+", "ls"}], ",", " ", "0"}], "}"}]}], "]"}]}], ";"}], 
   "  ", 
   RowBox[{"(*", 
    RowBox[{"swing", " ", "knee", " ", "pos"}], "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"gp5", " ", "=", " ", 
     RowBox[{"RPToHomogeneous", "[", 
      RowBox[{
       RowBox[{"IdentityMatrix", "[", "3", "]"}], ",", 
       RowBox[{"{", 
        RowBox[{"0", ",", "la", ",", " ", "0"}], "}"}]}], "]"}]}], ";"}], 
   "  ", 
   RowBox[{"(*", 
    RowBox[{"swing", " ", "ankle", " ", "pos"}], "*)"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"gp6", " ", "=", " ", 
     RowBox[{"RPToHomogeneous", "[", 
      RowBox[{
       RowBox[{"IdentityMatrix", "[", "3", "]"}], ",", 
       RowBox[{"{", 
        RowBox[{"lf", ",", "0", ",", " ", "0"}], "}"}]}], "]"}]}], ";"}], 
   "  ", 
   RowBox[{"(*", 
    RowBox[{"swing", " ", "toe", " ", "pos"}], "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"gp7", " ", "=", " ", 
     RowBox[{"RPToHomogeneous", "[", 
      RowBox[{
       RowBox[{"IdentityMatrix", "[", "3", "]"}], ",", 
       RowBox[{"{", 
        RowBox[{"0", ",", "0", ",", " ", "0"}], "}"}]}], "]"}]}], ";"}], "  ", 
   RowBox[{"(*", 
    RowBox[{"swing", " ", "heel", " ", "pos"}], "*)"}], 
   RowBox[{"(*", 
    RowBox[{"swing", " ", "point", " ", "foot", " ", "pos"}], 
    "*)"}]}]}]], "Input",
 CellChangeTimes->{{3.52068675271875*^9, 3.5206868401875*^9}, {
   3.52068688309375*^9, 3.520686884765625*^9}, {3.5206869316875*^9, 
   3.52068695546875*^9}, {3.52068703525*^9, 3.5206870995*^9}, {
   3.52068721059375*^9, 3.5206872309375*^9}, {3.520687329875*^9, 
   3.520687335984375*^9}, {3.520687447921875*^9, 3.520687482640625*^9}, {
   3.52085775021875*^9, 3.5208577569375*^9}, {3.52182002690625*^9, 
   3.521820029890625*^9}, {3.52199454090625*^9, 3.5219945435625*^9}, {
   3.521994576609375*^9, 3.521994577125*^9}, 3.522069407859375*^9, {
   3.52302817175*^9, 3.52302817784375*^9}, {3.52302821046875*^9, 
   3.523028219296875*^9}, {3.52302827453125*^9, 3.523028289421875*^9}, {
   3.52303357528125*^9, 3.523033624796875*^9}, {3.5232999903125*^9, 
   3.523300034796875*^9}, {3.52330072346875*^9, 3.52330075775*^9}, {
   3.5387617592355986`*^9, 3.538761759396615*^9}, {3.5387617916248374`*^9, 
   3.5387617925049257`*^9}, {3.543074082165307*^9, 3.543074148335307*^9}, {
   3.543074210203307*^9, 3.5430743652183065`*^9}, {3.543074567731307*^9, 
   3.543074573234307*^9}, {3.5551530722213793`*^9, 3.555153123128379*^9}, {
   3.5551548714599023`*^9, 3.555154880689748*^9}, {3.7638166935451756`*^9, 
   3.76381674183117*^9}, {3.7639203529556055`*^9, 3.7639203532584653`*^9}, 
   3.777915741587598*^9, {3.777915829761903*^9, 3.7779159177626963`*^9}, {
   3.7779159515282807`*^9, 3.777916003113441*^9}, {3.7779160400165005`*^9, 
   3.777916110144987*^9}, {3.7779161407274213`*^9, 3.777916143287918*^9}, {
   3.7779195888114386`*^9, 3.7779197056350513`*^9}, {3.777919750640922*^9, 
   3.777919834642557*^9}, {3.777919896262021*^9, 3.777920009221264*^9}, {
   3.77824242292951*^9, 3.778242429459546*^9}, {3.7798008166809053`*^9, 
   3.7798008169661036`*^9}, 3.779811825206807*^9}],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{"x1", "[", "t", "]"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"x2", "[", "t", "]"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"x3", "[", "t", "]"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"x4", "[", "t", "]"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"x5", "[", "t", "]"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"x6", "[", "t", "]"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"x7", "[", "t", "]"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"x8", "[", "t", "]"}], "}"}]}], "}"}]], "Output",
 CellChangeTimes->{3.780053996926866*^9, 3.78005402830194*^9, 
  3.7800757616249886`*^9, 3.7802483689463596`*^9}]
}, Open  ]],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{"Positions", " ", "of", " ", 
    RowBox[{"COM", "'"}], "s"}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"MatrixForm", "[", 
     RowBox[{"expFst", " ", "=", " ", 
      RowBox[{
       RowBox[{"e1", ".", "e2", ".", "e3", ".", "gst00"}], " ", "//", 
       "FullSimplify"}]}], "]"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"MatrixForm", "[", 
     RowBox[{"expSst", " ", "=", " ", 
      RowBox[{
       RowBox[{"e1", ".", "e2", ".", "e3", ".", "e4", ".", "gst01"}], "//", 
       "FullSimplify"}]}], "]"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"MatrixForm", "[", 
     RowBox[{"expTst", " ", "=", " ", 
      RowBox[{
       RowBox[{
       "e1", ".", "e2", ".", "e3", ".", "e4", ".", "e5", ".", "gst02"}], "//",
        "FullSimplify"}]}], "]"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"MatrixForm", "[", 
     RowBox[{"expH", " ", "=", " ", 
      RowBox[{
       RowBox[{
       "e1", ".", "e2", ".", "e3", ".", "e4", ".", "e5", ".", "gst03"}], "//",
        "FullSimplify"}]}], "]"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"MatrixForm", "[", 
     RowBox[{"expTsw", "=", " ", 
      RowBox[{
       RowBox[{
       "e1", ".", "e2", ".", "e3", ".", "e4", ".", "e5", ".", "e6", ".", 
        "gst04"}], "//", "FullSimplify"}]}], "]"}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"MatrixForm", "[", 
     RowBox[{"expSsw", " ", "=", " ", 
      RowBox[{
       RowBox[{
       "e1", ".", "e2", ".", "e3", ".", "e4", ".", "e5", ".", "e6", ".", "e7",
         ".", "gst05"}], "//", "FullSimplify"}]}], "]"}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"MatrixForm", "[", 
     RowBox[{"expFsw", " ", "=", " ", 
      RowBox[{
       RowBox[{
       "e1", ".", "e2", ".", "e3", ".", "e4", ".", "e5", ".", "e6", ".", "e7",
         ".", "e8", ".", "gst06"}], "//", "FullSimplify"}]}], "]"}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{"Positions", " ", "of", " ", 
     RowBox[{"Joints", "'"}], "s"}], "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"MatrixForm", "[", 
     RowBox[{"expToest", " ", "=", " ", 
      RowBox[{
       RowBox[{"e1", ".", "e2", ".", "e3", ".", "gp0"}], " ", "//", 
       "FullSimplify"}]}], "]"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"MatrixForm", "[", 
     RowBox[{"expAst", " ", "=", " ", 
      RowBox[{
       RowBox[{"e1", ".", "e2", ".", "e3", ".", "e4", ".", "gp1"}], "//", 
       "FullSimplify"}]}], "]"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"MatrixForm", "[", 
     RowBox[{"expKst", " ", "=", " ", 
      RowBox[{
       RowBox[{"e1", ".", "e2", ".", "e3", ".", "e4", ".", "e5", ".", "gp2"}],
        "//", "FullSimplify"}]}], "]"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"MatrixForm", "[", 
     RowBox[{"expH", "      ", "=", " ", 
      RowBox[{
       RowBox[{"e1", ".", "e2", ".", "e3", ".", "e4", ".", "e5", ".", "gp3"}],
        "//", "FullSimplify"}]}], "]"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"MatrixForm", "[", 
     RowBox[{"expKsw", "=", " ", 
      RowBox[{
       RowBox[{
       "e1", ".", "e2", ".", "e3", ".", "e4", ".", "e5", ".", "e6", ".", 
        "gp4"}], "//", "FullSimplify"}]}], "]"}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"MatrixForm", "[", 
     RowBox[{"expAsw", " ", "=", " ", 
      RowBox[{
       RowBox[{
       "e1", ".", "e2", ".", "e3", ".", "e4", ".", "e5", ".", "e6", ".", "e7",
         ".", "gp5"}], "//", "FullSimplify"}]}], "]"}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"MatrixForm", "[", 
     RowBox[{"expToesw", " ", "=", " ", 
      RowBox[{
       RowBox[{
       "e1", ".", "e2", ".", "e3", ".", "e4", ".", "e5", ".", "e6", ".", "e7",
         ".", "e8", ".", "gp6"}], "//", "FullSimplify"}]}], "]"}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"MatrixForm", "[", 
     RowBox[{"expHeelsw", " ", "=", " ", 
      RowBox[{
       RowBox[{
       "e1", ".", "e2", ".", "e3", ".", "e4", ".", "e5", ".", "e6", ".", "e7",
         ".", "e8", ".", "gp7"}], "//", "FullSimplify"}]}], "]"}], 
    ";"}]}]}]], "Input",
 CellChangeTimes->{{3.777916229424477*^9, 3.777916270381218*^9}, {
   3.7779163127880306`*^9, 3.777916347846925*^9}, {3.777917702260448*^9, 
   3.7779177166249943`*^9}, {3.777920031602582*^9, 3.777920129651227*^9}, {
   3.778242379154322*^9, 3.778242436913762*^9}, 3.779629019961957*^9, 
   3.7798097871048007`*^9}]
}, Open  ]],

Cell[CellGroupData[{

Cell["Dynamics", "Section",
 CellChangeTimes->{{3.521995144125*^9, 3.521995144875*^9}, {
   3.526060014172608*^9, 3.5260600152917194`*^9}, {3.543078143146307*^9, 
   3.543078144569307*^9}, 3.5431473723201914`*^9}],

Cell[CellGroupData[{

Cell["DSLIP Embedding", "Subsubsection",
 CellChangeTimes->{{3.7639204805204716`*^9, 3.763920481544552*^9}, {
  3.7639209191915884`*^9, 3.7639209220715466`*^9}, {3.7639224290917854`*^9, 
  3.763922465550254*^9}, {3.766847648630418*^9, 3.7668476514948564`*^9}}],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"pH", " ", "=", 
  RowBox[{"expH", "[", 
   RowBox[{"[", 
    RowBox[{
     RowBox[{"1", ";;", "3"}], ",", "4"}], "]"}], 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"pF1", " ", "=", 
   RowBox[{"expToest", "[", 
    RowBox[{"[", 
     RowBox[{
      RowBox[{"1", ";;", "3"}], ",", "4"}], "]"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"pF2", " ", "=", 
   RowBox[{"expToesw", "[", 
    RowBox[{"[", 
     RowBox[{
      RowBox[{"1", ";;", "3"}], ",", "4"}], "]"}], "]"}]}], 
  "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{
    RowBox[{"For", " ", "curved", " ", "foot", " ", 
     RowBox[{"model", ":", " ", 
      RowBox[{"R", " ", "is", " ", "foot", " ", "radius"}]}]}], ",", " ", 
    RowBox[{
    "alpha", " ", "is", " ", "radius", " ", "to", " ", "ankle", " ", 
     "offset"}], ",", " ", 
    RowBox[{"beta", " ", "is", " ", "ground", " ", "slope"}]}], 
   "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{"theta", " ", "=", " ", 
  RowBox[{
   RowBox[{"x3", "[", "t", "]"}], "+", "phi"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"MatrixForm", "[", 
   RowBox[{"pC", " ", "=", " ", 
    RowBox[{
     RowBox[{
      RowBox[{"{", 
       RowBox[{
        RowBox[{"x1", "[", "t", "]"}], ",", 
        RowBox[{"x2", "[", "t", "]"}], ",", "0"}], "}"}], "+", 
      RowBox[{"R", "*", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"Cos", "[", "theta", "]"}], ",", 
         RowBox[{"Sin", "[", "theta", "]"}], ",", "0"}], "}"}]}]}], "//", 
     "FullSimplify"}]}], "]"}], 
  RowBox[{"(*", 
   RowBox[{
   "pC", " ", "is", " ", "center", " ", "of", " ", "rotation", " ", "of", " ",
     "circular", " ", "curved", " ", "foot"}], 
   "*)"}]}], "\[IndentingNewLine]"}], "Input",
 CellChangeTimes->{{3.766845505688058*^9, 3.76684553289999*^9}, {
   3.7668455649474115`*^9, 3.7668455969328227`*^9}, {3.7668456976205077`*^9, 
   3.7668457176855545`*^9}, {3.7668458100990033`*^9, 
   3.7668459042453127`*^9}, {3.766845977154875*^9, 3.7668459781451063`*^9}, {
   3.7668460926259336`*^9, 3.7668461072798533`*^9}, {3.766846150273282*^9, 
   3.7668461957155275`*^9}, {3.7668462660170736`*^9, 
   3.7668462688002214`*^9}, {3.7668476363281727`*^9, 3.766847637430479*^9}, 
   3.7668509562465286`*^9, 3.7669255101716204`*^9, {3.766933693325363*^9, 
   3.7669336959598923`*^9}, 3.7779176157591467`*^9, 3.777917647904228*^9, {
   3.7779180828433976`*^9, 3.7779180836784663`*^9}, {3.7779181149456663`*^9, 
   3.7779181240526733`*^9}, {3.7796270938392687`*^9, 3.779627205759345*^9}, 
   3.7796273400884867`*^9, {3.779628547068688*^9, 3.779628552324131*^9}, 
   3.7796289397322674`*^9, {3.7796292874505763`*^9, 3.779629300070824*^9}, {
   3.779629839058929*^9, 3.7796299132381287`*^9}, {3.7796299527432613`*^9, 
   3.7796299586081357`*^9}, {3.779800824706478*^9, 3.779800836725994*^9}, {
   3.779809959744947*^9, 3.7798099659168873`*^9}, {3.780248336584402*^9, 
   3.780248341766551*^9}, {3.7802484130284615`*^9, 3.7802484204396296`*^9}, {
   3.7803165304049983`*^9, 3.780316548499889*^9}, {3.780317168908671*^9, 
   3.7803171817307816`*^9}, {3.7803181843454213`*^9, 3.780318201095773*^9}, {
   3.7803182649598203`*^9, 3.780318274855668*^9}, {3.7803196449658184`*^9, 
   3.7803196723459663`*^9}}],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{
    RowBox[{
     RowBox[{"-", "la"}], " ", 
     RowBox[{"Sin", "[", 
      RowBox[{"x3", "[", "t", "]"}], "]"}]}], "-", 
    RowBox[{"ls", " ", 
     RowBox[{"Sin", "[", 
      RowBox[{
       RowBox[{"x3", "[", "t", "]"}], "+", 
       RowBox[{"x4", "[", "t", "]"}]}], "]"}]}], "-", 
    RowBox[{"lt", " ", 
     RowBox[{"Sin", "[", 
      RowBox[{
       RowBox[{"x3", "[", "t", "]"}], "+", 
       RowBox[{"x4", "[", "t", "]"}], "+", 
       RowBox[{"x5", "[", "t", "]"}]}], "]"}]}], "+", 
    RowBox[{"x1", "[", "t", "]"}]}], ",", 
   RowBox[{
    RowBox[{"la", " ", 
     RowBox[{"Cos", "[", 
      RowBox[{"x3", "[", "t", "]"}], "]"}]}], "+", 
    RowBox[{"ls", " ", 
     RowBox[{"Cos", "[", 
      RowBox[{
       RowBox[{"x3", "[", "t", "]"}], "+", 
       RowBox[{"x4", "[", "t", "]"}]}], "]"}]}], "+", 
    RowBox[{"lt", " ", 
     RowBox[{"Cos", "[", 
      RowBox[{
       RowBox[{"x3", "[", "t", "]"}], "+", 
       RowBox[{"x4", "[", "t", "]"}], "+", 
       RowBox[{"x5", "[", "t", "]"}]}], "]"}]}], "+", 
    RowBox[{"x2", "[", "t", "]"}]}], ",", "0"}], "}"}]], "Output",
 CellChangeTimes->{
  3.7796272968136744`*^9, 3.7796273884752817`*^9, 3.7796275144387083`*^9, 
   3.779628735502936*^9, {3.77962894697209*^9, 3.779628968156926*^9}, 
   3.7796290498317037`*^9, 3.779629275425522*^9, 3.779629323965374*^9, 
   3.7796297445389385`*^9, 3.77962992446835*^9, 3.779629963547814*^9, 
   3.779800890235817*^9, 3.7798010424858513`*^9, 3.779810090925438*^9, 
   3.779810182338317*^9, 3.7798105083248396`*^9, 3.7798111451450157`*^9, {
   3.779811182270134*^9, 3.7798111988176117`*^9}, 3.7800539988345795`*^9, 
   3.7800540374667377`*^9, 3.780075769944637*^9, 3.780248379845916*^9, 
   3.78024842403996*^9, 3.780318216285345*^9, 3.780318295118536*^9}],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{
    RowBox[{"lf", " ", 
     RowBox[{"Cos", "[", 
      RowBox[{
       RowBox[{"x3", "[", "t", "]"}], "+", 
       RowBox[{"x4", "[", "t", "]"}], "+", 
       RowBox[{"x5", "[", "t", "]"}], "+", 
       RowBox[{"x6", "[", "t", "]"}], "+", 
       RowBox[{"x7", "[", "t", "]"}], "+", 
       RowBox[{"x8", "[", "t", "]"}]}], "]"}]}], "-", 
    RowBox[{"la", " ", 
     RowBox[{"Sin", "[", 
      RowBox[{"x3", "[", "t", "]"}], "]"}]}], "-", 
    RowBox[{"ls", " ", 
     RowBox[{"Sin", "[", 
      RowBox[{
       RowBox[{"x3", "[", "t", "]"}], "+", 
       RowBox[{"x4", "[", "t", "]"}]}], "]"}]}], "-", 
    RowBox[{"lt", " ", 
     RowBox[{"Sin", "[", 
      RowBox[{
       RowBox[{"x3", "[", "t", "]"}], "+", 
       RowBox[{"x4", "[", "t", "]"}], "+", 
       RowBox[{"x5", "[", "t", "]"}]}], "]"}]}], "+", 
    RowBox[{"lt", " ", 
     RowBox[{"Sin", "[", 
      RowBox[{
       RowBox[{"x3", "[", "t", "]"}], "+", 
       RowBox[{"x4", "[", "t", "]"}], "+", 
       RowBox[{"x5", "[", "t", "]"}], "+", 
       RowBox[{"x6", "[", "t", "]"}]}], "]"}]}], "+", 
    RowBox[{"ls", " ", 
     RowBox[{"Sin", "[", 
      RowBox[{
       RowBox[{"x3", "[", "t", "]"}], "+", 
       RowBox[{"x4", "[", "t", "]"}], "+", 
       RowBox[{"x5", "[", "t", "]"}], "+", 
       RowBox[{"x6", "[", "t", "]"}], "+", 
       RowBox[{"x7", "[", "t", "]"}]}], "]"}]}], "+", 
    RowBox[{"la", " ", 
     RowBox[{"Sin", "[", 
      RowBox[{
       RowBox[{"x3", "[", "t", "]"}], "+", 
       RowBox[{"x4", "[", "t", "]"}], "+", 
       RowBox[{"x5", "[", "t", "]"}], "+", 
       RowBox[{"x6", "[", "t", "]"}], "+", 
       RowBox[{"x7", "[", "t", "]"}], "+", 
       RowBox[{"x8", "[", "t", "]"}]}], "]"}]}], "+", 
    RowBox[{"x1", "[", "t", "]"}]}], ",", 
   RowBox[{
    RowBox[{"la", " ", 
     RowBox[{"Cos", "[", 
      RowBox[{"x3", "[", "t", "]"}], "]"}]}], "+", 
    RowBox[{"ls", " ", 
     RowBox[{"Cos", "[", 
      RowBox[{
       RowBox[{"x3", "[", "t", "]"}], "+", 
       RowBox[{"x4", "[", "t", "]"}]}], "]"}]}], "+", 
    RowBox[{"lt", " ", 
     RowBox[{"Cos", "[", 
      RowBox[{
       RowBox[{"x3", "[", "t", "]"}], "+", 
       RowBox[{"x4", "[", "t", "]"}], "+", 
       RowBox[{"x5", "[", "t", "]"}]}], "]"}]}], "-", 
    RowBox[{"lt", " ", 
     RowBox[{"Cos", "[", 
      RowBox[{
       RowBox[{"x3", "[", "t", "]"}], "+", 
       RowBox[{"x4", "[", "t", "]"}], "+", 
       RowBox[{"x5", "[", "t", "]"}], "+", 
       RowBox[{"x6", "[", "t", "]"}]}], "]"}]}], "-", 
    RowBox[{"ls", " ", 
     RowBox[{"Cos", "[", 
      RowBox[{
       RowBox[{"x3", "[", "t", "]"}], "+", 
       RowBox[{"x4", "[", "t", "]"}], "+", 
       RowBox[{"x5", "[", "t", "]"}], "+", 
       RowBox[{"x6", "[", "t", "]"}], "+", 
       RowBox[{"x7", "[", "t", "]"}]}], "]"}]}], "-", 
    RowBox[{"la", " ", 
     RowBox[{"Cos", "[", 
      RowBox[{
       RowBox[{"x3", "[", "t", "]"}], "+", 
       RowBox[{"x4", "[", "t", "]"}], "+", 
       RowBox[{"x5", "[", "t", "]"}], "+", 
       RowBox[{"x6", "[", "t", "]"}], "+", 
       RowBox[{"x7", "[", "t", "]"}], "+", 
       RowBox[{"x8", "[", "t", "]"}]}], "]"}]}], "+", 
    RowBox[{"lf", " ", 
     RowBox[{"Sin", "[", 
      RowBox[{
       RowBox[{"x3", "[", "t", "]"}], "+", 
       RowBox[{"x4", "[", "t", "]"}], "+", 
       RowBox[{"x5", "[", "t", "]"}], "+", 
       RowBox[{"x6", "[", "t", "]"}], "+", 
       RowBox[{"x7", "[", "t", "]"}], "+", 
       RowBox[{"x8", "[", "t", "]"}]}], "]"}]}], "+", 
    RowBox[{"x2", "[", "t", "]"}]}], ",", "0"}], "}"}]], "Output",
 CellChangeTimes->{
  3.7796272968136744`*^9, 3.7796273884752817`*^9, 3.7796275144387083`*^9, 
   3.779628735502936*^9, {3.77962894697209*^9, 3.779628968156926*^9}, 
   3.7796290498317037`*^9, 3.779629275425522*^9, 3.779629323965374*^9, 
   3.7796297445389385`*^9, 3.77962992446835*^9, 3.779629963547814*^9, 
   3.779800890235817*^9, 3.7798010424858513`*^9, 3.779810090925438*^9, 
   3.779810182338317*^9, 3.7798105083248396`*^9, 3.7798111451450157`*^9, {
   3.779811182270134*^9, 3.7798111988176117`*^9}, 3.7800539988345795`*^9, 
   3.7800540374667377`*^9, 3.780075769944637*^9, 3.780248379845916*^9, 
   3.78024842403996*^9, 3.780318216285345*^9, 3.780318295128955*^9}],

Cell[BoxData[
 RowBox[{"phi", "+", 
  RowBox[{"x3", "[", "t", "]"}]}]], "Output",
 CellChangeTimes->{
  3.7796272968136744`*^9, 3.7796273884752817`*^9, 3.7796275144387083`*^9, 
   3.779628735502936*^9, {3.77962894697209*^9, 3.779628968156926*^9}, 
   3.7796290498317037`*^9, 3.779629275425522*^9, 3.779629323965374*^9, 
   3.7796297445389385`*^9, 3.77962992446835*^9, 3.779629963547814*^9, 
   3.779800890235817*^9, 3.7798010424858513`*^9, 3.779810090925438*^9, 
   3.779810182338317*^9, 3.7798105083248396`*^9, 3.7798111451450157`*^9, {
   3.779811182270134*^9, 3.7798111988176117`*^9}, 3.7800539988345795`*^9, 
   3.7800540374667377`*^9, 3.780075769944637*^9, 3.780248379845916*^9, 
   3.78024842403996*^9, 3.780318216285345*^9, 3.780318295128955*^9}],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", 
   TagBox[GridBox[{
      {
       RowBox[{
        RowBox[{"R", " ", 
         RowBox[{"Cos", "[", 
          RowBox[{"phi", "+", 
           RowBox[{"x3", "[", "t", "]"}]}], "]"}]}], "+", 
        RowBox[{"x1", "[", "t", "]"}]}]},
      {
       RowBox[{
        RowBox[{"R", " ", 
         RowBox[{"Sin", "[", 
          RowBox[{"phi", "+", 
           RowBox[{"x3", "[", "t", "]"}]}], "]"}]}], "+", 
        RowBox[{"x2", "[", "t", "]"}]}]},
      {"0"}
     },
     GridBoxAlignment->{
      "Columns" -> {{Center}}, "ColumnsIndexed" -> {}, "Rows" -> {{Baseline}},
        "RowsIndexed" -> {}},
     GridBoxSpacings->{"Columns" -> {
         Offset[0.27999999999999997`], {
          Offset[0.5599999999999999]}, 
         Offset[0.27999999999999997`]}, "ColumnsIndexed" -> {}, "Rows" -> {
         Offset[0.2], {
          Offset[0.4]}, 
         Offset[0.2]}, "RowsIndexed" -> {}}],
    Column], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellChangeTimes->{
  3.7796272968136744`*^9, 3.7796273884752817`*^9, 3.7796275144387083`*^9, 
   3.779628735502936*^9, {3.77962894697209*^9, 3.779628968156926*^9}, 
   3.7796290498317037`*^9, 3.779629275425522*^9, 3.779629323965374*^9, 
   3.7796297445389385`*^9, 3.77962992446835*^9, 3.779629963547814*^9, 
   3.779800890235817*^9, 3.7798010424858513`*^9, 3.779810090925438*^9, 
   3.779810182338317*^9, 3.7798105083248396`*^9, 3.7798111451450157`*^9, {
   3.779811182270134*^9, 3.7798111988176117`*^9}, 3.7800539988345795`*^9, 
   3.7800540374667377`*^9, 3.780075769944637*^9, 3.780248379845916*^9, 
   3.78024842403996*^9, 3.780318216285345*^9, 3.7803182951389875`*^9}]
}, Open  ]],

Cell[BoxData[""], "Input",
 CellChangeTimes->{{3.436353983078125*^9, 3.436353991234375*^9}, {
   3.436354181125*^9, 3.43635418390625*^9}, 3.5090404416343727`*^9, {
   3.509539414111295*^9, 3.509539527743894*^9}, 3.509539567648764*^9, {
   3.5095401253128805`*^9, 3.5095401303828897`*^9}, {3.5095401706491876`*^9, 
   3.5095401776848*^9}, {3.520767514421875*^9, 3.520767516734375*^9}, {
   3.520767582609375*^9, 3.520767645375*^9}, {3.5207676989375*^9, 
   3.520767715578125*^9}, {3.5230288115*^9, 3.52302884490625*^9}, {
   3.5431472111331916`*^9, 3.5431472276271915`*^9}, {3.5551550672540536`*^9, 
   3.5551550847125444`*^9}, {3.7354013090469794`*^9, 3.7354013272384634`*^9}, 
   3.735402586068088*^9, {3.7355700991070976`*^9, 3.735570100188266*^9}, 
   3.7366221128014383`*^9, {3.7366221436572127`*^9, 3.736622156672744*^9}, {
   3.736694910091427*^9, 3.736694926553073*^9}, {3.7366949728562174`*^9, 
   3.7366949909853835`*^9}, {3.7366951181023893`*^9, 3.736695130005561*^9}, {
   3.740489951746674*^9, 3.7404899555238447`*^9}, 3.74050757733245*^9, {
   3.740998914667108*^9, 3.740998917544409*^9}, {3.740999028057352*^9, 
   3.74099905490458*^9}, {3.7409994625500927`*^9, 3.740999476116825*^9}, {
   3.763816821368079*^9, 3.763816827176324*^9}, {3.7639205215778227`*^9, 
   3.763920532347257*^9}, 3.7639209083266277`*^9, {3.7639209399431157`*^9, 
   3.7639209584073467`*^9}, {3.763921097511383*^9, 3.7639211041267977`*^9}, {
   3.7639211499771085`*^9, 3.763921285050226*^9}, {3.7639213496851053`*^9, 
   3.7639214124362335`*^9}, {3.7639214671401286`*^9, 
   3.7639215203721623`*^9}, {3.7639216283574257`*^9, 3.763921630372426*^9}, {
   3.7639223522122946`*^9, 3.763922383887144*^9}, {3.763922727069458*^9, 
   3.763922745213709*^9}, {3.763922784824605*^9, 3.7639227988798075`*^9}, {
   3.763922834606544*^9, 3.7639228879338*^9}, {3.763922934552292*^9, 
   3.7639229667018213`*^9}, {3.763923086462696*^9, 3.7639231026690593`*^9}, {
   3.7639887699484334`*^9, 3.763988780923917*^9}, {3.763995404359267*^9, 
   3.763995407352643*^9}, {3.7647641067628584`*^9, 3.7647641240427294`*^9}, {
   3.764764457577089*^9, 3.764764464584691*^9}, {3.764765017335846*^9, 
   3.764765029160233*^9}, {3.764765090775797*^9, 3.7647651282472563`*^9}, {
   3.7647653616387916`*^9, 3.764765472982376*^9}, {3.7658890741253223`*^9, 
   3.7658891104274197`*^9}, {3.7658900673785067`*^9, 3.7658900678512373`*^9}, 
   3.7658901155678177`*^9, {3.766839561124361*^9, 3.766839562436724*^9}, {
   3.766844702008257*^9, 3.766844704872295*^9}, {3.766845995746029*^9, 
   3.766846065440652*^9}, {3.766846568909679*^9, 3.766846659885513*^9}, {
   3.766846763292362*^9, 3.7668467645889173`*^9}, 3.7668468076284885`*^9, {
   3.766847193241349*^9, 3.766847206282116*^9}, {3.7668492625775805`*^9, 
   3.7668492660011363`*^9}, {3.766922509191225*^9, 3.7669225159147863`*^9}, {
   3.7669255042177787`*^9, 3.766925504956279*^9}, {3.7669332982472076`*^9, 
   3.766933301396445*^9}, {3.7669336657518044`*^9, 3.7669336699977665`*^9}, {
   3.766933704982257*^9, 3.7669337147985272`*^9}, {3.7722791583093104`*^9, 
   3.7722791773335705`*^9}, {3.7722792335609226`*^9, 
   3.7722792361810074`*^9}, {3.7722796971865225`*^9, 
   3.7722797379874945`*^9}, {3.7778174380129833`*^9, 3.7778174465951676`*^9}, 
   3.777817931871464*^9, {3.779627207979822*^9, 3.779627254029112*^9}, {
   3.7796274326687984`*^9, 3.779627469327773*^9}}],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"MatrixForm", "[", 
  RowBox[{"L1", " ", "=", " ", 
   RowBox[{
    RowBox[{"ComplexExpand", "[", 
     RowBox[{
      RowBox[{"Norm", "[", 
       RowBox[{
        RowBox[{"pH", "-", "pF1"}], ",", "2"}], "]"}], ",", 
      RowBox[{"x", " ", "\[Element]", "Reals"}]}], "]"}], "//", 
    "FullSimplify"}]}], "]"}], "\n", 
 RowBox[{"MatrixForm", "[", 
  RowBox[{"LJacob1", "=", " ", 
   RowBox[{
    RowBox[{"Transpose", "[", 
     RowBox[{"{", 
      RowBox[{"D", "[", 
       RowBox[{"L1", ",", 
        RowBox[{"Transpose", "[", "x", "]"}]}], "]"}], "}"}], "]"}], "//", 
    "FullSimplify"}]}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"MatrixForm", "[", 
  RowBox[{"L1dot", " ", "=", " ", 
   RowBox[{
    RowBox[{"D", "[", 
     RowBox[{"L1", ",", "t"}], "]"}], "//", "FullSimplify"}]}], 
  "]"}], "\[IndentingNewLine]", 
 RowBox[{"ToMatlab", "[", "L1", "]"}]}], "Input",
 CellChangeTimes->{{3.436353983078125*^9, 3.436353991234375*^9}, {
   3.436354181125*^9, 3.43635418390625*^9}, 3.5090404416343727`*^9, {
   3.509539414111295*^9, 3.509539527743894*^9}, 3.509539567648764*^9, {
   3.5095401253128805`*^9, 3.5095401303828897`*^9}, {3.5095401706491876`*^9, 
   3.5095401776848*^9}, {3.520767514421875*^9, 3.520767516734375*^9}, {
   3.520767582609375*^9, 3.520767645375*^9}, {3.5207676989375*^9, 
   3.520767715578125*^9}, {3.5230288115*^9, 3.52302884490625*^9}, {
   3.5431472111331916`*^9, 3.5431472276271915`*^9}, {3.5551550672540536`*^9, 
   3.5551550847125444`*^9}, {3.7354013090469794`*^9, 3.7354013272384634`*^9}, 
   3.735402586068088*^9, {3.7355700991070976`*^9, 3.735570100188266*^9}, 
   3.7366221128014383`*^9, {3.7366221436572127`*^9, 3.736622156672744*^9}, {
   3.736694910091427*^9, 3.736694926553073*^9}, {3.7366949728562174`*^9, 
   3.7366949909853835`*^9}, {3.7366951181023893`*^9, 3.736695130005561*^9}, {
   3.740489951746674*^9, 3.7404899555238447`*^9}, 3.74050757733245*^9, {
   3.740998914667108*^9, 3.740998917544409*^9}, {3.740999028057352*^9, 
   3.74099905490458*^9}, {3.7409994625500927`*^9, 3.740999476116825*^9}, {
   3.763816821368079*^9, 3.763816827176324*^9}, {3.7639205215778227`*^9, 
   3.763920532347257*^9}, 3.7639209083266277`*^9, {3.7639209399431157`*^9, 
   3.7639209584073467`*^9}, {3.763921097511383*^9, 3.7639211041267977`*^9}, {
   3.7639211499771085`*^9, 3.763921285050226*^9}, {3.7639213496851053`*^9, 
   3.7639214124362335`*^9}, {3.7639214671401286`*^9, 
   3.7639215203721623`*^9}, {3.7639216283574257`*^9, 3.763921630372426*^9}, {
   3.7639223522122946`*^9, 3.763922383887144*^9}, {3.763922727069458*^9, 
   3.763922745213709*^9}, {3.763922784824605*^9, 3.7639227988798075`*^9}, {
   3.763922834606544*^9, 3.7639228879338*^9}, {3.763922934552292*^9, 
   3.7639229667018213`*^9}, {3.763923086462696*^9, 3.7639231026690593`*^9}, {
   3.7639887699484334`*^9, 3.763988780923917*^9}, {3.763995404359267*^9, 
   3.763995407352643*^9}, {3.7647641067628584`*^9, 3.7647641240427294`*^9}, {
   3.764764457577089*^9, 3.764764464584691*^9}, {3.764765017335846*^9, 
   3.764765029160233*^9}, {3.764765090775797*^9, 3.7647651282472563`*^9}, {
   3.7647653616387916`*^9, 3.764765472982376*^9}, {3.7658890741253223`*^9, 
   3.7658891104274197`*^9}, {3.7658900673785067`*^9, 3.7658900678512373`*^9}, 
   3.7658901155678177`*^9, {3.766839561124361*^9, 3.766839562436724*^9}, {
   3.766844702008257*^9, 3.766844704872295*^9}, {3.766845995746029*^9, 
   3.766846065440652*^9}, {3.766846568909679*^9, 3.766846659885513*^9}, {
   3.766846763292362*^9, 3.7668467645889173`*^9}, 3.7668468076284885`*^9, {
   3.766847193241349*^9, 3.766847206282116*^9}, {3.7668492625775805`*^9, 
   3.7668492660011363`*^9}, {3.766922509191225*^9, 3.7669225159147863`*^9}, {
   3.7669255042177787`*^9, 3.766925504956279*^9}, {3.7669332982472076`*^9, 
   3.766933301396445*^9}, {3.7669336657518044`*^9, 3.7669336699977665`*^9}, {
   3.766933704982257*^9, 3.7669337147985272`*^9}, {3.7722791583093104`*^9, 
   3.7722791773335705`*^9}, {3.7722792335609226`*^9, 
   3.7722792361810074`*^9}, {3.7722796971865225`*^9, 
   3.7722797379874945`*^9}, {3.7778174380129833`*^9, 3.7778174465951676`*^9}, 
   3.777817931871464*^9, {3.779627207979822*^9, 3.779627254029112*^9}, {
   3.7796274326687984`*^9, 3.779627469327773*^9}, {3.7796293161306467`*^9, 
   3.779629318005816*^9}, {3.779800841986126*^9, 3.7798008508896656`*^9}, 
   3.779801013036151*^9, {3.779809106136417*^9, 3.7798091095426435`*^9}, {
   3.7800757209276676`*^9, 3.7800757465979304`*^9}}],

Cell[BoxData[
 TagBox[
  SqrtBox[
   RowBox[{
    SuperscriptBox["la", "2"], "+", 
    SuperscriptBox["lf", "2"], "+", 
    SuperscriptBox["ls", "2"], "+", 
    SuperscriptBox["lt", "2"], "+", 
    RowBox[{"2", " ", 
     RowBox[{"(", 
      RowBox[{
       RowBox[{"la", " ", "ls", " ", 
        RowBox[{"Cos", "[", 
         RowBox[{"x4", "[", "t", "]"}], "]"}]}], "+", 
       RowBox[{"ls", " ", "lt", " ", 
        RowBox[{"Cos", "[", 
         RowBox[{"x5", "[", "t", "]"}], "]"}]}], "+", 
       RowBox[{"la", " ", "lt", " ", 
        RowBox[{"Cos", "[", 
         RowBox[{
          RowBox[{"x4", "[", "t", "]"}], "+", 
          RowBox[{"x5", "[", "t", "]"}]}], "]"}]}], "+", 
       RowBox[{"lf", " ", "ls", " ", 
        RowBox[{"Sin", "[", 
         RowBox[{"x4", "[", "t", "]"}], "]"}]}], "+", 
       RowBox[{"lf", " ", "lt", " ", 
        RowBox[{"Sin", "[", 
         RowBox[{
          RowBox[{"x4", "[", "t", "]"}], "+", 
          RowBox[{"x5", "[", "t", "]"}]}], "]"}]}]}], ")"}]}]}]],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellChangeTimes->{
  3.779627514523004*^9, 3.7796287355930567`*^9, 3.7796289471017814`*^9, 
   3.779629049951582*^9, 3.7796292754906073`*^9, 3.7796293241504335`*^9, 
   3.77962974463892*^9, 3.7796299245580606`*^9, 3.7796299636231933`*^9, 
   3.779800890309637*^9, 3.779801043030364*^9, 3.7798091146672287`*^9, 
   3.779810091456417*^9, 3.7798101829475837`*^9, 3.7798105089072876`*^9, 
   3.779811145285668*^9, {3.7798111824105816`*^9, 3.779811199405039*^9}, 
   3.780053998986881*^9, 3.780054038036772*^9, 3.7800757705801816`*^9, 
   3.7802483804652576`*^9}],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {"0"},
     {"0"},
     {"0"},
     {
      FractionBox[
       RowBox[{
        RowBox[{"lf", " ", "ls", " ", 
         RowBox[{"Cos", "[", 
          RowBox[{"x4", "[", "t", "]"}], "]"}]}], "+", 
        RowBox[{"lf", " ", "lt", " ", 
         RowBox[{"Cos", "[", 
          RowBox[{
           RowBox[{"x4", "[", "t", "]"}], "+", 
           RowBox[{"x5", "[", "t", "]"}]}], "]"}]}], "-", 
        RowBox[{"la", " ", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{"ls", " ", 
            RowBox[{"Sin", "[", 
             RowBox[{"x4", "[", "t", "]"}], "]"}]}], "+", 
           RowBox[{"lt", " ", 
            RowBox[{"Sin", "[", 
             RowBox[{
              RowBox[{"x4", "[", "t", "]"}], "+", 
              RowBox[{"x5", "[", "t", "]"}]}], "]"}]}]}], ")"}]}]}], 
       SqrtBox[
        RowBox[{
         SuperscriptBox["la", "2"], "+", 
         SuperscriptBox["lf", "2"], "+", 
         SuperscriptBox["ls", "2"], "+", 
         SuperscriptBox["lt", "2"], "+", 
         RowBox[{"2", " ", 
          RowBox[{"(", 
           RowBox[{
            RowBox[{"la", " ", "ls", " ", 
             RowBox[{"Cos", "[", 
              RowBox[{"x4", "[", "t", "]"}], "]"}]}], "+", 
            RowBox[{"ls", " ", "lt", " ", 
             RowBox[{"Cos", "[", 
              RowBox[{"x5", "[", "t", "]"}], "]"}]}], "+", 
            RowBox[{"la", " ", "lt", " ", 
             RowBox[{"Cos", "[", 
              RowBox[{
               RowBox[{"x4", "[", "t", "]"}], "+", 
               RowBox[{"x5", "[", "t", "]"}]}], "]"}]}], "+", 
            RowBox[{"lf", " ", "ls", " ", 
             RowBox[{"Sin", "[", 
              RowBox[{"x4", "[", "t", "]"}], "]"}]}], "+", 
            RowBox[{"lf", " ", "lt", " ", 
             RowBox[{"Sin", "[", 
              RowBox[{
               RowBox[{"x4", "[", "t", "]"}], "+", 
               RowBox[{"x5", "[", "t", "]"}]}], "]"}]}]}], ")"}]}]}]]]},
     {
      FractionBox[
       RowBox[{"lt", " ", 
        RowBox[{"(", 
         RowBox[{
          RowBox[{"lf", " ", 
           RowBox[{"Cos", "[", 
            RowBox[{
             RowBox[{"x4", "[", "t", "]"}], "+", 
             RowBox[{"x5", "[", "t", "]"}]}], "]"}]}], "-", 
          RowBox[{"ls", " ", 
           RowBox[{"Sin", "[", 
            RowBox[{"x5", "[", "t", "]"}], "]"}]}], "-", 
          RowBox[{"la", " ", 
           RowBox[{"Sin", "[", 
            RowBox[{
             RowBox[{"x4", "[", "t", "]"}], "+", 
             RowBox[{"x5", "[", "t", "]"}]}], "]"}]}]}], ")"}]}], 
       SqrtBox[
        RowBox[{
         SuperscriptBox["la", "2"], "+", 
         SuperscriptBox["lf", "2"], "+", 
         SuperscriptBox["ls", "2"], "+", 
         SuperscriptBox["lt", "2"], "+", 
         RowBox[{"2", " ", 
          RowBox[{"(", 
           RowBox[{
            RowBox[{"la", " ", "ls", " ", 
             RowBox[{"Cos", "[", 
              RowBox[{"x4", "[", "t", "]"}], "]"}]}], "+", 
            RowBox[{"ls", " ", "lt", " ", 
             RowBox[{"Cos", "[", 
              RowBox[{"x5", "[", "t", "]"}], "]"}]}], "+", 
            RowBox[{"la", " ", "lt", " ", 
             RowBox[{"Cos", "[", 
              RowBox[{
               RowBox[{"x4", "[", "t", "]"}], "+", 
               RowBox[{"x5", "[", "t", "]"}]}], "]"}]}], "+", 
            RowBox[{"lf", " ", "ls", " ", 
             RowBox[{"Sin", "[", 
              RowBox[{"x4", "[", "t", "]"}], "]"}]}], "+", 
            RowBox[{"lf", " ", "lt", " ", 
             RowBox[{"Sin", "[", 
              RowBox[{
               RowBox[{"x4", "[", "t", "]"}], "+", 
               RowBox[{"x5", "[", "t", "]"}]}], "]"}]}]}], ")"}]}]}]]]},
     {"0"},
     {"0"},
     {"0"}
    },
    GridBoxAlignment->{
     "Columns" -> {{Center}}, "ColumnsIndexed" -> {}, "Rows" -> {{Baseline}}, 
      "RowsIndexed" -> {}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "ColumnsIndexed" -> {}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}, "RowsIndexed" -> {}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellChangeTimes->{
  3.779627514523004*^9, 3.7796287355930567`*^9, 3.7796289471017814`*^9, 
   3.779629049951582*^9, 3.7796292754906073`*^9, 3.7796293241504335`*^9, 
   3.77962974463892*^9, 3.7796299245580606`*^9, 3.7796299636231933`*^9, 
   3.779800890309637*^9, 3.779801043030364*^9, 3.7798091146672287`*^9, 
   3.779810091456417*^9, 3.7798101829475837`*^9, 3.7798105089072876`*^9, 
   3.779811145285668*^9, {3.7798111824105816`*^9, 3.779811199405039*^9}, 
   3.780053998986881*^9, 3.780054038036772*^9, 3.7800757705801816`*^9, 
   3.7802483813867917`*^9}],

Cell[BoxData[
 TagBox[
  FractionBox[
   RowBox[{
    RowBox[{
     RowBox[{"(", 
      RowBox[{
       RowBox[{"lf", " ", "ls", " ", 
        RowBox[{"Cos", "[", 
         RowBox[{"x4", "[", "t", "]"}], "]"}]}], "+", 
       RowBox[{"lf", " ", "lt", " ", 
        RowBox[{"Cos", "[", 
         RowBox[{
          RowBox[{"x4", "[", "t", "]"}], "+", 
          RowBox[{"x5", "[", "t", "]"}]}], "]"}]}], "-", 
       RowBox[{"la", " ", 
        RowBox[{"(", 
         RowBox[{
          RowBox[{"ls", " ", 
           RowBox[{"Sin", "[", 
            RowBox[{"x4", "[", "t", "]"}], "]"}]}], "+", 
          RowBox[{"lt", " ", 
           RowBox[{"Sin", "[", 
            RowBox[{
             RowBox[{"x4", "[", "t", "]"}], "+", 
             RowBox[{"x5", "[", "t", "]"}]}], "]"}]}]}], ")"}]}]}], ")"}], 
     " ", 
     RowBox[{
      SuperscriptBox["x4", "\[Prime]",
       MultilineFunction->None], "[", "t", "]"}]}], "+", 
    RowBox[{"lt", " ", 
     RowBox[{"(", 
      RowBox[{
       RowBox[{"lf", " ", 
        RowBox[{"Cos", "[", 
         RowBox[{
          RowBox[{"x4", "[", "t", "]"}], "+", 
          RowBox[{"x5", "[", "t", "]"}]}], "]"}]}], "-", 
       RowBox[{"ls", " ", 
        RowBox[{"Sin", "[", 
         RowBox[{"x5", "[", "t", "]"}], "]"}]}], "-", 
       RowBox[{"la", " ", 
        RowBox[{"Sin", "[", 
         RowBox[{
          RowBox[{"x4", "[", "t", "]"}], "+", 
          RowBox[{"x5", "[", "t", "]"}]}], "]"}]}]}], ")"}], " ", 
     RowBox[{
      SuperscriptBox["x5", "\[Prime]",
       MultilineFunction->None], "[", "t", "]"}]}]}], 
   SqrtBox[
    RowBox[{
     SuperscriptBox["la", "2"], "+", 
     SuperscriptBox["lf", "2"], "+", 
     SuperscriptBox["ls", "2"], "+", 
     SuperscriptBox["lt", "2"], "+", 
     RowBox[{"2", " ", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{"la", " ", "ls", " ", 
         RowBox[{"Cos", "[", 
          RowBox[{"x4", "[", "t", "]"}], "]"}]}], "+", 
        RowBox[{"ls", " ", "lt", " ", 
         RowBox[{"Cos", "[", 
          RowBox[{"x5", "[", "t", "]"}], "]"}]}], "+", 
        RowBox[{"la", " ", "lt", " ", 
         RowBox[{"Cos", "[", 
          RowBox[{
           RowBox[{"x4", "[", "t", "]"}], "+", 
           RowBox[{"x5", "[", "t", "]"}]}], "]"}]}], "+", 
        RowBox[{"lf", " ", "ls", " ", 
         RowBox[{"Sin", "[", 
          RowBox[{"x4", "[", "t", "]"}], "]"}]}], "+", 
        RowBox[{"lf", " ", "lt", " ", 
         RowBox[{"Sin", "[", 
          RowBox[{
           RowBox[{"x4", "[", "t", "]"}], "+", 
           RowBox[{"x5", "[", "t", "]"}]}], "]"}]}]}], ")"}]}]}]]],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellChangeTimes->{
  3.779627514523004*^9, 3.7796287355930567`*^9, 3.7796289471017814`*^9, 
   3.779629049951582*^9, 3.7796292754906073`*^9, 3.7796293241504335`*^9, 
   3.77962974463892*^9, 3.7796299245580606`*^9, 3.7796299636231933`*^9, 
   3.779800890309637*^9, 3.779801043030364*^9, 3.7798091146672287`*^9, 
   3.779810091456417*^9, 3.7798101829475837`*^9, 3.7798105089072876`*^9, 
   3.779811145285668*^9, {3.7798111824105816`*^9, 3.779811199405039*^9}, 
   3.780053998986881*^9, 3.780054038036772*^9, 3.7800757705801816`*^9, 
   3.7802483822674584`*^9}],

Cell[BoxData["\<\"(la.^2+lf.^2+ls.^2+lt.^2+2.*(la.*ls.*cos(x4(t))+ls.*lt.*cos(\
x5(t))+la.*lt.*cos(x4(t)+x5(t))+lf.*ls.*sin(x4(t))+lf.*lt.*sin(x4(t)+x5(t)))).\
^(1/2);\\n\"\>"], "Output",
 CellChangeTimes->{
  3.779627514523004*^9, 3.7796287355930567`*^9, 3.7796289471017814`*^9, 
   3.779629049951582*^9, 3.7796292754906073`*^9, 3.7796293241504335`*^9, 
   3.77962974463892*^9, 3.7796299245580606`*^9, 3.7796299636231933`*^9, 
   3.779800890309637*^9, 3.779801043030364*^9, 3.7798091146672287`*^9, 
   3.779810091456417*^9, 3.7798101829475837`*^9, 3.7798105089072876`*^9, 
   3.779811145285668*^9, {3.7798111824105816`*^9, 3.779811199405039*^9}, 
   3.780053998986881*^9, 3.780054038036772*^9, 3.7800757705801816`*^9, 
   3.780248382270441*^9}]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"MatrixForm", "[", 
  RowBox[{"L2", " ", "=", " ", 
   RowBox[{
    RowBox[{"ComplexExpand", "[", 
     RowBox[{
      RowBox[{"Norm", "[", 
       RowBox[{
        RowBox[{"pF2", "-", "pH"}], ",", "2"}], "]"}], ",", 
      RowBox[{"x", " ", "\[Element]", "Reals"}]}], "]"}], "//", 
    "FullSimplify"}]}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"MatrixForm", "[", 
  RowBox[{"LJacob2", "=", " ", 
   RowBox[{
    RowBox[{"Transpose", "[", 
     RowBox[{"{", 
      RowBox[{"D", "[", 
       RowBox[{"L2", ",", 
        RowBox[{"Transpose", "[", "x", "]"}]}], "]"}], "}"}], "]"}], "//", 
    "FullSimplify"}]}], "]"}]}], "Input",
 CellChangeTimes->{{3.436353983078125*^9, 3.436353991234375*^9}, {
   3.436354181125*^9, 3.43635418390625*^9}, 3.5090404416343727`*^9, {
   3.509539414111295*^9, 3.509539527743894*^9}, 3.509539567648764*^9, {
   3.5095401253128805`*^9, 3.5095401303828897`*^9}, {3.5095401706491876`*^9, 
   3.5095401776848*^9}, {3.520767514421875*^9, 3.520767516734375*^9}, {
   3.520767582609375*^9, 3.520767645375*^9}, {3.5207676989375*^9, 
   3.520767715578125*^9}, {3.5230288115*^9, 3.52302884490625*^9}, {
   3.5431472111331916`*^9, 3.5431472276271915`*^9}, {3.5551550672540536`*^9, 
   3.5551550847125444`*^9}, {3.7354013090469794`*^9, 3.7354013272384634`*^9}, 
   3.735402586068088*^9, {3.7355700991070976`*^9, 3.735570100188266*^9}, 
   3.7366221128014383`*^9, {3.7366221436572127`*^9, 3.736622156672744*^9}, {
   3.736694910091427*^9, 3.736694926553073*^9}, {3.7366949728562174`*^9, 
   3.7366949909853835`*^9}, {3.7366951181023893`*^9, 3.736695130005561*^9}, {
   3.740489951746674*^9, 3.7404899555238447`*^9}, 3.74050757733245*^9, {
   3.740998914667108*^9, 3.740998917544409*^9}, {3.740999028057352*^9, 
   3.74099905490458*^9}, {3.7409994625500927`*^9, 3.740999476116825*^9}, {
   3.763816821368079*^9, 3.763816827176324*^9}, {3.7639205215778227`*^9, 
   3.763920532347257*^9}, 3.7639209083266277`*^9, {3.7639209399431157`*^9, 
   3.7639209584073467`*^9}, {3.763921097511383*^9, 3.7639211041267977`*^9}, {
   3.7639211499771085`*^9, 3.763921285050226*^9}, {3.7639213496851053`*^9, 
   3.7639214124362335`*^9}, {3.7639214671401286`*^9, 
   3.7639215203721623`*^9}, {3.7639216283574257`*^9, 3.763921630372426*^9}, {
   3.7639223522122946`*^9, 3.763922383887144*^9}, {3.763922727069458*^9, 
   3.763922745213709*^9}, {3.763922784824605*^9, 3.7639227988798075`*^9}, {
   3.763922834606544*^9, 3.7639228879338*^9}, {3.763922934552292*^9, 
   3.7639229667018213`*^9}, {3.763923086462696*^9, 3.7639231026690593`*^9}, {
   3.7639887699484334`*^9, 3.763988780923917*^9}, {3.763995404359267*^9, 
   3.763995407352643*^9}, {3.7647641067628584`*^9, 3.7647641240427294`*^9}, {
   3.764764457577089*^9, 3.764764464584691*^9}, {3.764765017335846*^9, 
   3.764765029160233*^9}, {3.764765090775797*^9, 3.7647651282472563`*^9}, {
   3.7647653616387916`*^9, 3.764765472982376*^9}, {3.7658890741253223`*^9, 
   3.7658891104274197`*^9}, {3.7658900673785067`*^9, 3.7658900678512373`*^9}, 
   3.7658901155678177`*^9, {3.766839561124361*^9, 3.766839562436724*^9}, {
   3.766844702008257*^9, 3.766844704872295*^9}, {3.766845995746029*^9, 
   3.766846065440652*^9}, {3.766846568909679*^9, 3.766846659885513*^9}, {
   3.766846763292362*^9, 3.7668467645889173`*^9}, 3.7668468076284885`*^9, {
   3.766847193241349*^9, 3.766847206282116*^9}, {3.7668492625775805`*^9, 
   3.7668492660011363`*^9}, {3.766922509191225*^9, 3.7669225159147863`*^9}, {
   3.7669255042177787`*^9, 3.766925504956279*^9}, {3.7669332982472076`*^9, 
   3.766933301396445*^9}, {3.7669336657518044`*^9, 3.7669336699977665`*^9}, {
   3.766933704982257*^9, 3.7669337147985272`*^9}, {3.7722791583093104`*^9, 
   3.7722791773335705`*^9}, {3.7722792335609226`*^9, 
   3.7722792361810074`*^9}, {3.7722796971865225`*^9, 
   3.7722797379874945`*^9}, {3.7778174380129833`*^9, 3.7778174465951676`*^9}, 
   3.777817931871464*^9, {3.779627207979822*^9, 3.779627254029112*^9}, {
   3.7796274326687984`*^9, 3.779627465798032*^9}, 3.7796293148707633`*^9, {
   3.779800854065956*^9, 3.7798008606760597`*^9}, 3.779801015106172*^9}],

Cell[BoxData[
 TagBox[
  SqrtBox[
   RowBox[{
    SuperscriptBox["la", "2"], "+", 
    SuperscriptBox["lf", "2"], "+", 
    SuperscriptBox["ls", "2"], "+", 
    SuperscriptBox["lt", "2"], "+", 
    RowBox[{"2", " ", "ls", " ", "lt", " ", 
     RowBox[{"Cos", "[", 
      RowBox[{"x7", "[", "t", "]"}], "]"}]}], "+", 
    RowBox[{"2", " ", "la", " ", "ls", " ", 
     RowBox[{"Cos", "[", 
      RowBox[{"x8", "[", "t", "]"}], "]"}]}], "+", 
    RowBox[{"2", " ", "la", " ", "lt", " ", 
     RowBox[{"Cos", "[", 
      RowBox[{
       RowBox[{"x7", "[", "t", "]"}], "+", 
       RowBox[{"x8", "[", "t", "]"}]}], "]"}]}], "-", 
    RowBox[{"2", " ", "lf", " ", "ls", " ", 
     RowBox[{"Sin", "[", 
      RowBox[{"x8", "[", "t", "]"}], "]"}]}], "-", 
    RowBox[{"2", " ", "lf", " ", "lt", " ", 
     RowBox[{"Sin", "[", 
      RowBox[{
       RowBox[{"x7", "[", "t", "]"}], "+", 
       RowBox[{"x8", "[", "t", "]"}]}], "]"}]}]}]],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellChangeTimes->{
  3.779627518248623*^9, 3.7796287393076587`*^9, 3.7796289472021*^9, 
   3.779629050091501*^9, 3.779629278370818*^9, 3.77962932428047*^9, 
   3.7796297453588448`*^9, 3.7796299247382956`*^9, 3.779629963928166*^9, 
   3.779800891795621*^9, 3.779801044583314*^9, 3.779810092971799*^9, 
   3.779810184447513*^9, 3.77981051037681*^9, 3.779811145426251*^9, {
   3.7798111825358377`*^9, 3.7798112010506325`*^9}, 3.7800539991166997`*^9, 
   3.780054039506566*^9, 3.7800757731771245`*^9, 3.7802483828459716`*^9}],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {"0"},
     {"0"},
     {"0"},
     {"0"},
     {"0"},
     {"0"},
     {
      RowBox[{"-", 
       FractionBox[
        RowBox[{"lt", " ", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{"lf", " ", 
            RowBox[{"Cos", "[", 
             RowBox[{
              RowBox[{"x7", "[", "t", "]"}], "+", 
              RowBox[{"x8", "[", "t", "]"}]}], "]"}]}], "+", 
           RowBox[{"ls", " ", 
            RowBox[{"Sin", "[", 
             RowBox[{"x7", "[", "t", "]"}], "]"}]}], "+", 
           RowBox[{"la", " ", 
            RowBox[{"Sin", "[", 
             RowBox[{
              RowBox[{"x7", "[", "t", "]"}], "+", 
              RowBox[{"x8", "[", "t", "]"}]}], "]"}]}]}], ")"}]}], 
        SqrtBox[
         RowBox[{
          SuperscriptBox["la", "2"], "+", 
          SuperscriptBox["lf", "2"], "+", 
          SuperscriptBox["ls", "2"], "+", 
          SuperscriptBox["lt", "2"], "+", 
          RowBox[{"2", " ", "ls", " ", "lt", " ", 
           RowBox[{"Cos", "[", 
            RowBox[{"x7", "[", "t", "]"}], "]"}]}], "+", 
          RowBox[{"2", " ", "la", " ", "ls", " ", 
           RowBox[{"Cos", "[", 
            RowBox[{"x8", "[", "t", "]"}], "]"}]}], "+", 
          RowBox[{"2", " ", "la", " ", "lt", " ", 
           RowBox[{"Cos", "[", 
            RowBox[{
             RowBox[{"x7", "[", "t", "]"}], "+", 
             RowBox[{"x8", "[", "t", "]"}]}], "]"}]}], "-", 
          RowBox[{"2", " ", "lf", " ", "ls", " ", 
           RowBox[{"Sin", "[", 
            RowBox[{"x8", "[", "t", "]"}], "]"}]}], "-", 
          RowBox[{"2", " ", "lf", " ", "lt", " ", 
           RowBox[{"Sin", "[", 
            RowBox[{
             RowBox[{"x7", "[", "t", "]"}], "+", 
             RowBox[{"x8", "[", "t", "]"}]}], "]"}]}]}]]]}]},
     {
      RowBox[{"-", 
       FractionBox[
        RowBox[{
         RowBox[{"lf", " ", "ls", " ", 
          RowBox[{"Cos", "[", 
           RowBox[{"x8", "[", "t", "]"}], "]"}]}], "+", 
         RowBox[{"lf", " ", "lt", " ", 
          RowBox[{"Cos", "[", 
           RowBox[{
            RowBox[{"x7", "[", "t", "]"}], "+", 
            RowBox[{"x8", "[", "t", "]"}]}], "]"}]}], "+", 
         RowBox[{"la", " ", "ls", " ", 
          RowBox[{"Sin", "[", 
           RowBox[{"x8", "[", "t", "]"}], "]"}]}], "+", 
         RowBox[{"la", " ", "lt", " ", 
          RowBox[{"Sin", "[", 
           RowBox[{
            RowBox[{"x7", "[", "t", "]"}], "+", 
            RowBox[{"x8", "[", "t", "]"}]}], "]"}]}]}], 
        SqrtBox[
         RowBox[{
          SuperscriptBox["la", "2"], "+", 
          SuperscriptBox["lf", "2"], "+", 
          SuperscriptBox["ls", "2"], "+", 
          SuperscriptBox["lt", "2"], "+", 
          RowBox[{"2", " ", "ls", " ", "lt", " ", 
           RowBox[{"Cos", "[", 
            RowBox[{"x7", "[", "t", "]"}], "]"}]}], "+", 
          RowBox[{"2", " ", "la", " ", "ls", " ", 
           RowBox[{"Cos", "[", 
            RowBox[{"x8", "[", "t", "]"}], "]"}]}], "+", 
          RowBox[{"2", " ", "la", " ", "lt", " ", 
           RowBox[{"Cos", "[", 
            RowBox[{
             RowBox[{"x7", "[", "t", "]"}], "+", 
             RowBox[{"x8", "[", "t", "]"}]}], "]"}]}], "-", 
          RowBox[{"2", " ", "lf", " ", "ls", " ", 
           RowBox[{"Sin", "[", 
            RowBox[{"x8", "[", "t", "]"}], "]"}]}], "-", 
          RowBox[{"2", " ", "lf", " ", "lt", " ", 
           RowBox[{"Sin", "[", 
            RowBox[{
             RowBox[{"x7", "[", "t", "]"}], "+", 
             RowBox[{"x8", "[", "t", "]"}]}], "]"}]}]}]]]}]}
    },
    GridBoxAlignment->{
     "Columns" -> {{Center}}, "ColumnsIndexed" -> {}, "Rows" -> {{Baseline}}, 
      "RowsIndexed" -> {}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "ColumnsIndexed" -> {}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}, "RowsIndexed" -> {}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellChangeTimes->{
  3.779627518248623*^9, 3.7796287393076587`*^9, 3.7796289472021*^9, 
   3.779629050091501*^9, 3.779629278370818*^9, 3.77962932428047*^9, 
   3.7796297453588448`*^9, 3.7796299247382956`*^9, 3.779629963928166*^9, 
   3.779800891795621*^9, 3.779801044583314*^9, 3.779810092971799*^9, 
   3.779810184447513*^9, 3.77981051037681*^9, 3.779811145426251*^9, {
   3.7798111825358377`*^9, 3.7798112010506325`*^9}, 3.7800539991166997`*^9, 
   3.780054039506566*^9, 3.7800757731771245`*^9, 3.780248383734435*^9}]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"tempV", " ", "=", " ", 
  RowBox[{
   RowBox[{"pC", " ", "-", "pH"}], "//", 
   "FullSimplify"}]}], "\[IndentingNewLine]", 
 RowBox[{"ToMatlab", "[", "pC", "]"}], "\[IndentingNewLine]", 
 RowBox[{"MatrixForm", "[", 
  RowBox[{"L3", " ", "=", " ", 
   RowBox[{
    RowBox[{"ComplexExpand", "[", 
     RowBox[{
      RowBox[{"Norm", "[", 
       RowBox[{"tempV", ",", "2"}], "]"}], ",", 
      RowBox[{"x", " ", "\[Element]", "Reals"}]}], "]"}], "//", 
    "TrigFactor"}]}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"MatrixForm", "[", 
  RowBox[{"LJacob3", "=", " ", 
   RowBox[{
    RowBox[{"Transpose", "[", 
     RowBox[{"{", 
      RowBox[{"D", "[", 
       RowBox[{"L3", ",", 
        RowBox[{"Transpose", "[", "x", "]"}]}], "]"}], "}"}], "]"}], "//", 
    "FullSimplify"}]}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"MatrixForm", "[", 
  RowBox[{"L3dot", " ", "=", " ", 
   RowBox[{
    RowBox[{"D", "[", 
     RowBox[{"L3", ",", "t"}], "]"}], "//", "FullSimplify"}]}], 
  "]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"(*", 
   RowBox[{"LJacob3", "=", " ", 
    RowBox[{"Transpose", "[", 
     RowBox[{"{", 
      RowBox[{"D", "[", 
       RowBox[{"L3", ",", 
        RowBox[{"Transpose", "[", "x", "]"}]}], "]"}], "}"}], "]"}]}], 
   "*)"}]}]}], "Input",
 CellChangeTimes->{{3.436353983078125*^9, 3.436353991234375*^9}, {
   3.436354181125*^9, 3.43635418390625*^9}, 3.5090404416343727`*^9, {
   3.509539414111295*^9, 3.509539527743894*^9}, 3.509539567648764*^9, {
   3.5095401253128805`*^9, 3.5095401303828897`*^9}, {3.5095401706491876`*^9, 
   3.5095401776848*^9}, {3.520767514421875*^9, 3.520767516734375*^9}, {
   3.520767582609375*^9, 3.520767645375*^9}, {3.5207676989375*^9, 
   3.520767715578125*^9}, {3.5230288115*^9, 3.52302884490625*^9}, {
   3.5431472111331916`*^9, 3.5431472276271915`*^9}, {3.5551550672540536`*^9, 
   3.5551550847125444`*^9}, {3.7354013090469794`*^9, 3.7354013272384634`*^9}, 
   3.735402586068088*^9, {3.7355700991070976`*^9, 3.735570100188266*^9}, 
   3.7366221128014383`*^9, {3.7366221436572127`*^9, 3.736622156672744*^9}, {
   3.736694910091427*^9, 3.736694926553073*^9}, {3.7366949728562174`*^9, 
   3.7366949909853835`*^9}, {3.7366951181023893`*^9, 3.736695130005561*^9}, {
   3.740489951746674*^9, 3.7404899555238447`*^9}, 3.74050757733245*^9, {
   3.740998914667108*^9, 3.740998917544409*^9}, {3.740999028057352*^9, 
   3.74099905490458*^9}, {3.7409994625500927`*^9, 3.740999476116825*^9}, {
   3.763816821368079*^9, 3.763816827176324*^9}, {3.7639205215778227`*^9, 
   3.763920532347257*^9}, 3.7639209083266277`*^9, {3.7639209399431157`*^9, 
   3.7639209584073467`*^9}, {3.763921097511383*^9, 3.7639211041267977`*^9}, {
   3.7639211499771085`*^9, 3.763921285050226*^9}, {3.7639213496851053`*^9, 
   3.7639214124362335`*^9}, {3.7639214671401286`*^9, 
   3.7639215203721623`*^9}, {3.7639216283574257`*^9, 3.763921630372426*^9}, {
   3.7639223522122946`*^9, 3.763922383887144*^9}, {3.763922727069458*^9, 
   3.763922745213709*^9}, {3.763922784824605*^9, 3.7639227988798075`*^9}, {
   3.763922834606544*^9, 3.7639228879338*^9}, {3.763922934552292*^9, 
   3.7639229667018213`*^9}, {3.763923086462696*^9, 3.7639231026690593`*^9}, {
   3.7639887699484334`*^9, 3.763988780923917*^9}, {3.763995404359267*^9, 
   3.763995407352643*^9}, {3.7647641067628584`*^9, 3.7647641240427294`*^9}, {
   3.764764457577089*^9, 3.764764464584691*^9}, {3.764765017335846*^9, 
   3.764765029160233*^9}, {3.764765090775797*^9, 3.7647651282472563`*^9}, {
   3.7647653616387916`*^9, 3.764765472982376*^9}, {3.7658890741253223`*^9, 
   3.7658891104274197`*^9}, {3.7658900673785067`*^9, 3.7658900678512373`*^9}, 
   3.7658901155678177`*^9, {3.766839561124361*^9, 3.766839562436724*^9}, {
   3.766844702008257*^9, 3.766844704872295*^9}, {3.766845995746029*^9, 
   3.766846065440652*^9}, {3.766846568909679*^9, 3.766846659885513*^9}, {
   3.766846763292362*^9, 3.7668467645889173`*^9}, 3.7668468076284885`*^9, {
   3.766847193241349*^9, 3.766847206282116*^9}, {3.7668492625775805`*^9, 
   3.7668492660011363`*^9}, {3.766922509191225*^9, 3.7669225159147863`*^9}, {
   3.7669255042177787`*^9, 3.766925504956279*^9}, {3.7669332982472076`*^9, 
   3.766933301396445*^9}, {3.7669336657518044`*^9, 3.7669336699977665`*^9}, {
   3.766933704982257*^9, 3.7669337147985272`*^9}, {3.7722791583093104`*^9, 
   3.7722791773335705`*^9}, {3.7722792335609226`*^9, 
   3.7722792361810074`*^9}, {3.7722796971865225`*^9, 
   3.7722797379874945`*^9}, {3.7778174380129833`*^9, 3.7778174465951676`*^9}, 
   3.777817931871464*^9, {3.779627207979822*^9, 3.779627254029112*^9}, {
   3.7796274326687984`*^9, 3.7796274878080616`*^9}, 3.7796277936164513`*^9, {
   3.779628140725497*^9, 3.7796281512855353`*^9}, {3.7796282256053896`*^9, 
   3.7796282709223795`*^9}, {3.779629302760543*^9, 3.779629303270918*^9}, {
   3.779629773599036*^9, 3.7796297749189854`*^9}, {3.7798008636061354`*^9, 
   3.7798008705259886`*^9}, 3.7803182257753687`*^9, {3.7803184991180873`*^9, 
   3.7803185160587187`*^9}, {3.780319417341154*^9, 3.7803194210968075`*^9}, {
   3.780319600166286*^9, 3.7803196060059757`*^9}, {3.7804080193795776`*^9, 
   3.780408023848816*^9}}],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{
    RowBox[{"R", " ", 
     RowBox[{"Cos", "[", 
      RowBox[{"phi", "+", 
       RowBox[{"x3", "[", "t", "]"}]}], "]"}]}], "+", 
    RowBox[{"la", " ", 
     RowBox[{"Sin", "[", 
      RowBox[{"x3", "[", "t", "]"}], "]"}]}], "+", 
    RowBox[{"ls", " ", 
     RowBox[{"Sin", "[", 
      RowBox[{
       RowBox[{"x3", "[", "t", "]"}], "+", 
       RowBox[{"x4", "[", "t", "]"}]}], "]"}]}], "+", 
    RowBox[{"lt", " ", 
     RowBox[{"Sin", "[", 
      RowBox[{
       RowBox[{"x3", "[", "t", "]"}], "+", 
       RowBox[{"x4", "[", "t", "]"}], "+", 
       RowBox[{"x5", "[", "t", "]"}]}], "]"}]}]}], ",", 
   RowBox[{
    RowBox[{
     RowBox[{"-", "la"}], " ", 
     RowBox[{"Cos", "[", 
      RowBox[{"x3", "[", "t", "]"}], "]"}]}], "-", 
    RowBox[{"ls", " ", 
     RowBox[{"Cos", "[", 
      RowBox[{
       RowBox[{"x3", "[", "t", "]"}], "+", 
       RowBox[{"x4", "[", "t", "]"}]}], "]"}]}], "-", 
    RowBox[{"lt", " ", 
     RowBox[{"Cos", "[", 
      RowBox[{
       RowBox[{"x3", "[", "t", "]"}], "+", 
       RowBox[{"x4", "[", "t", "]"}], "+", 
       RowBox[{"x5", "[", "t", "]"}]}], "]"}]}], "+", 
    RowBox[{"R", " ", 
     RowBox[{"Sin", "[", 
      RowBox[{"phi", "+", 
       RowBox[{"x3", "[", "t", "]"}]}], "]"}]}]}], ",", "0"}], 
  "}"}]], "Output",
 CellChangeTimes->{
  3.779627803246756*^9, 3.7796281548502874`*^9, {3.779628238684916*^9, 
   3.7796282775251594`*^9}, 3.7796287852928467`*^9, 3.779628947232173*^9, 
   3.779629050221821*^9, 3.779629283068925*^9, 3.779629324410522*^9, 
   3.779629746158845*^9, 3.7796297792088127`*^9, 3.7796299291179066`*^9, 
   3.7796299661378345`*^9, 3.7798008959206285`*^9, 3.779801048266034*^9, 
   3.7798100964672737`*^9, 3.7798101880258355`*^9, 3.779810514128192*^9, 
   3.7798111455513487`*^9, {3.779811182676239*^9, 3.779811204750392*^9}, 
   3.7800539992468233`*^9, 3.7800540429933033`*^9, 3.780075776650057*^9, 
   3.780248386313837*^9, 3.7803182341650267`*^9, 3.7803183107136936`*^9, 
   3.780318530648257*^9, 3.7803194239811115`*^9, 3.7803196112221527`*^9, 
   3.780408026918306*^9}],

Cell[BoxData["\<\"[R.*cos(phi+x3(t))+x1(t),R.*sin(phi+x3(t))+x2(t),0];\\n\"\>\
"], "Output",
 CellChangeTimes->{
  3.779627803246756*^9, 3.7796281548502874`*^9, {3.779628238684916*^9, 
   3.7796282775251594`*^9}, 3.7796287852928467`*^9, 3.779628947232173*^9, 
   3.779629050221821*^9, 3.779629283068925*^9, 3.779629324410522*^9, 
   3.779629746158845*^9, 3.7796297792088127`*^9, 3.7796299291179066`*^9, 
   3.7796299661378345`*^9, 3.7798008959206285`*^9, 3.779801048266034*^9, 
   3.7798100964672737`*^9, 3.7798101880258355`*^9, 3.779810514128192*^9, 
   3.7798111455513487`*^9, {3.779811182676239*^9, 3.779811204750392*^9}, 
   3.7800539992468233`*^9, 3.7800540429933033`*^9, 3.780075776650057*^9, 
   3.780248386313837*^9, 3.7803182341650267`*^9, 3.7803183107136936`*^9, 
   3.780318530648257*^9, 3.7803194239811115`*^9, 3.7803196112221527`*^9, 
   3.780408026918306*^9}],

Cell[BoxData[
 TagBox[
  SqrtBox[
   RowBox[{
    SuperscriptBox["la", "2"], "+", 
    SuperscriptBox["ls", "2"], "+", 
    SuperscriptBox["lt", "2"], "+", 
    SuperscriptBox["R", "2"], "+", 
    RowBox[{"2", " ", "la", " ", "ls", " ", 
     RowBox[{"Cos", "[", 
      RowBox[{"x4", "[", "t", "]"}], "]"}]}], "+", 
    RowBox[{"2", " ", "ls", " ", "lt", " ", 
     RowBox[{"Cos", "[", 
      RowBox[{"x5", "[", "t", "]"}], "]"}]}], "+", 
    RowBox[{"2", " ", "la", " ", "lt", " ", 
     RowBox[{"Cos", "[", 
      RowBox[{
       RowBox[{"x4", "[", "t", "]"}], "+", 
       RowBox[{"x5", "[", "t", "]"}]}], "]"}]}], "-", 
    RowBox[{"2", " ", "la", " ", "R", " ", 
     RowBox[{"Sin", "[", "phi", "]"}]}], "-", 
    RowBox[{"2", " ", "ls", " ", "R", " ", 
     RowBox[{"Sin", "[", 
      RowBox[{"phi", "-", 
       RowBox[{"x4", "[", "t", "]"}]}], "]"}]}], "-", 
    RowBox[{"2", " ", "lt", " ", "R", " ", 
     RowBox[{"Sin", "[", 
      RowBox[{"phi", "-", 
       RowBox[{"x4", "[", "t", "]"}], "-", 
       RowBox[{"x5", "[", "t", "]"}]}], "]"}]}]}]],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellChangeTimes->{
  3.779627803246756*^9, 3.7796281548502874`*^9, {3.779628238684916*^9, 
   3.7796282775251594`*^9}, 3.7796287852928467`*^9, 3.779628947232173*^9, 
   3.779629050221821*^9, 3.779629283068925*^9, 3.779629324410522*^9, 
   3.779629746158845*^9, 3.7796297792088127`*^9, 3.7796299291179066`*^9, 
   3.7796299661378345`*^9, 3.7798008959206285`*^9, 3.779801048266034*^9, 
   3.7798100964672737`*^9, 3.7798101880258355`*^9, 3.779810514128192*^9, 
   3.7798111455513487`*^9, {3.779811182676239*^9, 3.779811204750392*^9}, 
   3.7800539992468233`*^9, 3.7800540429933033`*^9, 3.780075776650057*^9, 
   3.780248386313837*^9, 3.7803182341650267`*^9, 3.7803183107136936`*^9, 
   3.780318530648257*^9, 3.7803194239811115`*^9, 3.7803196112221527`*^9, 
   3.780408026944293*^9}],

Cell[BoxData[
 RowBox[{
  StyleBox[
   RowBox[{"Transpose", "::", "nmtx"}], "MessageName"], 
  RowBox[{
  ":", " "}], "\<\"The first two levels of \[NoBreak]\\!\\(\\*RowBox[{\\\"{\\\
\", \\\"0\\\", \\\"}\\\"}]\\)\[NoBreak] cannot be transposed. \
\\!\\(\\*ButtonBox[\\\"\[RightSkeleton]\\\", ButtonStyle->\\\"Link\\\", \
ButtonFrame->None, ButtonData:>\\\"paclet:ref/message/Transpose/nmtx\\\", \
ButtonNote -> \\\"Transpose::nmtx\\\"]\\)\"\>"}]], "Message", "MSG",
 CellChangeTimes->{3.780408027046259*^9}],

Cell[BoxData[
 TagBox[
  RowBox[{"Transpose", "[", 
   RowBox[{"{", "0", "}"}], "]"}],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellChangeTimes->{
  3.779627803246756*^9, 3.7796281548502874`*^9, {3.779628238684916*^9, 
   3.7796282775251594`*^9}, 3.7796287852928467`*^9, 3.779628947232173*^9, 
   3.779629050221821*^9, 3.779629283068925*^9, 3.779629324410522*^9, 
   3.779629746158845*^9, 3.7796297792088127`*^9, 3.7796299291179066`*^9, 
   3.7796299661378345`*^9, 3.7798008959206285`*^9, 3.779801048266034*^9, 
   3.7798100964672737`*^9, 3.7798101880258355`*^9, 3.779810514128192*^9, 
   3.7798111455513487`*^9, {3.779811182676239*^9, 3.779811204750392*^9}, 
   3.7800539992468233`*^9, 3.7800540429933033`*^9, 3.780075776650057*^9, 
   3.780248386313837*^9, 3.7803182341650267`*^9, 3.7803183107136936`*^9, 
   3.780318530648257*^9, 3.7803194239811115`*^9, 3.7803196112221527`*^9, 
   3.780408027046259*^9}],

Cell[BoxData[
 TagBox[
  FractionBox[
   RowBox[{
    RowBox[{
     RowBox[{"(", 
      RowBox[{
       RowBox[{"ls", " ", "R", " ", 
        RowBox[{"Cos", "[", 
         RowBox[{"phi", "-", 
          RowBox[{"x4", "[", "t", "]"}]}], "]"}]}], "+", 
       RowBox[{"lt", " ", "R", " ", 
        RowBox[{"Cos", "[", 
         RowBox[{"phi", "-", 
          RowBox[{"x4", "[", "t", "]"}], "-", 
          RowBox[{"x5", "[", "t", "]"}]}], "]"}]}], "-", 
       RowBox[{"la", " ", 
        RowBox[{"(", 
         RowBox[{
          RowBox[{"ls", " ", 
           RowBox[{"Sin", "[", 
            RowBox[{"x4", "[", "t", "]"}], "]"}]}], "+", 
          RowBox[{"lt", " ", 
           RowBox[{"Sin", "[", 
            RowBox[{
             RowBox[{"x4", "[", "t", "]"}], "+", 
             RowBox[{"x5", "[", "t", "]"}]}], "]"}]}]}], ")"}]}]}], ")"}], 
     " ", 
     RowBox[{
      SuperscriptBox["x4", "\[Prime]",
       MultilineFunction->None], "[", "t", "]"}]}], "+", 
    RowBox[{"lt", " ", 
     RowBox[{"(", 
      RowBox[{
       RowBox[{"R", " ", 
        RowBox[{"Cos", "[", 
         RowBox[{"phi", "-", 
          RowBox[{"x4", "[", "t", "]"}], "-", 
          RowBox[{"x5", "[", "t", "]"}]}], "]"}]}], "-", 
       RowBox[{"ls", " ", 
        RowBox[{"Sin", "[", 
         RowBox[{"x5", "[", "t", "]"}], "]"}]}], "-", 
       RowBox[{"la", " ", 
        RowBox[{"Sin", "[", 
         RowBox[{
          RowBox[{"x4", "[", "t", "]"}], "+", 
          RowBox[{"x5", "[", "t", "]"}]}], "]"}]}]}], ")"}], " ", 
     RowBox[{
      SuperscriptBox["x5", "\[Prime]",
       MultilineFunction->None], "[", "t", "]"}]}]}], 
   SqrtBox[
    RowBox[{
     SuperscriptBox["la", "2"], "+", 
     SuperscriptBox["ls", "2"], "+", 
     SuperscriptBox["lt", "2"], "+", 
     SuperscriptBox["R", "2"], "+", 
     RowBox[{"2", " ", "la", " ", "ls", " ", 
      RowBox[{"Cos", "[", 
       RowBox[{"x4", "[", "t", "]"}], "]"}]}], "+", 
     RowBox[{"2", " ", "ls", " ", "lt", " ", 
      RowBox[{"Cos", "[", 
       RowBox[{"x5", "[", "t", "]"}], "]"}]}], "+", 
     RowBox[{"2", " ", "la", " ", "lt", " ", 
      RowBox[{"Cos", "[", 
       RowBox[{
        RowBox[{"x4", "[", "t", "]"}], "+", 
        RowBox[{"x5", "[", "t", "]"}]}], "]"}]}], "-", 
     RowBox[{"2", " ", "la", " ", "R", " ", 
      RowBox[{"Sin", "[", "phi", "]"}]}], "-", 
     RowBox[{"2", " ", "ls", " ", "R", " ", 
      RowBox[{"Sin", "[", 
       RowBox[{"phi", "-", 
        RowBox[{"x4", "[", "t", "]"}]}], "]"}]}], "-", 
     RowBox[{"2", " ", "lt", " ", "R", " ", 
      RowBox[{"Sin", "[", 
       RowBox[{"phi", "-", 
        RowBox[{"x4", "[", "t", "]"}], "-", 
        RowBox[{"x5", "[", "t", "]"}]}], "]"}]}]}]]],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellChangeTimes->{
  3.779627803246756*^9, 3.7796281548502874`*^9, {3.779628238684916*^9, 
   3.7796282775251594`*^9}, 3.7796287852928467`*^9, 3.779628947232173*^9, 
   3.779629050221821*^9, 3.779629283068925*^9, 3.779629324410522*^9, 
   3.779629746158845*^9, 3.7796297792088127`*^9, 3.7796299291179066`*^9, 
   3.7796299661378345`*^9, 3.7798008959206285`*^9, 3.779801048266034*^9, 
   3.7798100964672737`*^9, 3.7798101880258355`*^9, 3.779810514128192*^9, 
   3.7798111455513487`*^9, {3.779811182676239*^9, 3.779811204750392*^9}, 
   3.7800539992468233`*^9, 3.7800540429933033`*^9, 3.780075776650057*^9, 
   3.780248386313837*^9, 3.7803182341650267`*^9, 3.7803183107136936`*^9, 
   3.780318530648257*^9, 3.7803194239811115`*^9, 3.7803196112221527`*^9, 
   3.780408028880458*^9}]
}, Open  ]]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Export", "Section",
 CellChangeTimes->{{3.511177531124222*^9, 3.511177531860264*^9}}],

Cell[BoxData[{
 RowBox[{"Clear", "[", "x", "]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"{", 
   RowBox[{
    RowBox[{
     RowBox[{"x1", "[", "t", "]"}], ":=", 
     RowBox[{"x", "[", "1", "]"}]}], ",", " ", 
    RowBox[{
     RowBox[{"x2", "[", "t", "]"}], ":=", 
     RowBox[{"x", "[", "2", "]"}]}], ",", " ", 
    RowBox[{
     RowBox[{"x3", "[", "t", "]"}], ":=", 
     RowBox[{"x", "[", "3", "]"}]}], ",", " ", 
    RowBox[{
     RowBox[{"x4", "[", "t", "]"}], ":=", 
     RowBox[{"x", "[", "4", "]"}]}], ",", 
    RowBox[{
     RowBox[{"x5", "[", "t", "]"}], ":=", 
     RowBox[{"x", "[", "5", "]"}]}], ",", 
    RowBox[{
     RowBox[{
      RowBox[{"x1", "'"}], "[", "t", "]"}], ":=", 
     RowBox[{"x", "[", "6", "]"}]}], ",", " ", 
    RowBox[{
     RowBox[{
      RowBox[{"x2", "'"}], "[", "t", "]"}], ":=", 
     RowBox[{"x", "[", "7", "]"}]}], ",", " ", 
    RowBox[{
     RowBox[{
      RowBox[{"x3", "'"}], "[", "t", "]"}], ":=", 
     RowBox[{"x", "[", "8", "]"}]}], ",", " ", 
    RowBox[{
     RowBox[{
      RowBox[{"x4", "'"}], "[", "t", "]"}], ":=", 
     RowBox[{"x", "[", "9", "]"}]}], ",", " ", 
    RowBox[{
     RowBox[{
      RowBox[{"x5", "'"}], "[", "t", "]"}], ":=", 
     RowBox[{"x", "[", "10", "]"}]}], ",", 
    RowBox[{
     RowBox[{
      RowBox[{"x1", "''"}], "[", "t", "]"}], ":=", 
     RowBox[{"a", "[", "1", "]"}]}], ",", " ", 
    RowBox[{
     RowBox[{
      RowBox[{"x2", "''"}], "[", "t", "]"}], ":=", 
     RowBox[{"a", "[", "2", "]"}]}], ",", " ", 
    RowBox[{
     RowBox[{
      RowBox[{"x3", "''"}], "[", "t", "]"}], ":=", 
     RowBox[{"a", "[", "3", "]"}]}], ",", 
    RowBox[{
     RowBox[{
      RowBox[{"x4", "''"}], "[", "t", "]"}], ":=", 
     RowBox[{"a", "[", "4", "]"}]}], ",", 
    RowBox[{
     RowBox[{
      RowBox[{"x5", "''"}], "[", "t", "]"}], ":=", 
     RowBox[{"a", "[", "5", "]"}]}], ",", 
    RowBox[{
     RowBox[{
      RowBox[{"x6", "''"}], "[", "t", "]"}], ":=", 
     RowBox[{"a", "[", "6", "]"}]}], ",", 
    RowBox[{
     RowBox[{
      RowBox[{"x7", "''"}], "[", "t", "]"}], ":=", 
     RowBox[{"a", "[", "7", "]"}]}], ",", 
    RowBox[{
     RowBox[{
      RowBox[{"x8", "''"}], "[", "t", "]"}], ":=", 
     RowBox[{"a", "[", "8", "]"}]}]}], "}"}], ";"}]}], "Input",
 CellChangeTimes->{{3.523274663953125*^9, 3.5232746810625*^9}, {
   3.52327495384375*^9, 3.5232750456875*^9}, {3.5232901581875*^9, 
   3.523290214203125*^9}, {3.523380407609375*^9, 3.52338042590625*^9}, {
   3.523380594984375*^9, 3.523380620390625*^9}, {3.538749586056141*^9, 
   3.5387495922311406`*^9}, {3.538835825326691*^9, 3.538835847437691*^9}, {
   3.5431437314051914`*^9, 3.5431437394361916`*^9}, {3.543928827586776*^9, 
   3.5439288325927753`*^9}, {3.5550941946856728`*^9, 
   3.5550942017716727`*^9}, {3.5550942703126726`*^9, 3.555094363648673*^9}, {
   3.555178321819333*^9, 3.555178343561333*^9}, {3.5551783963133335`*^9, 
   3.5551784047093334`*^9}, {3.5553271072898808`*^9, 3.55532714308346*^9}, {
   3.5558698844658337`*^9, 3.5558698887528334`*^9}, {3.5558699258888335`*^9, 
   3.5558699260948334`*^9}, 3.7404899945838785`*^9, 3.763985685557726*^9, {
   3.766839059428672*^9, 3.7668390599897084`*^9}, 3.7668476276088934`*^9, {
   3.766855781789193*^9, 3.7668557985722*^9}, {3.7668571709820786`*^9, 
   3.766857216438575*^9}, {3.7668578392979937`*^9, 3.766857879684413*^9}, {
   3.7778168024551315`*^9, 3.777816803045433*^9}, {3.7778174695229225`*^9, 
   3.77781746976779*^9}, {3.777817949380939*^9, 3.777817958461069*^9}, {
   3.777918448666876*^9, 3.777918492002409*^9}, 3.780076192232467*^9}],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"ToMatlab", "[", "L1", "]"}], "\[IndentingNewLine]", 
 RowBox[{"ToMatlab", "[", "LJacob1", "]"}]}], "Input",
 CellChangeTimes->{{3.7796272312590103`*^9, 3.7796272439495764`*^9}, 
   3.779627492678239*^9, 3.779627796786601*^9, {3.779811174535808*^9, 
   3.77981117725498*^9}}],

Cell[BoxData["\<\"(la.^2+lf.^2+ls.^2+lt.^2+2.*(la.*ls.*cos(x(4))+ls.*lt.*cos(\
x(5))+la.*lt.*cos(x(4)+x(5))+lf.*ls.*sin(x(4))+lf.*lt.*sin(x(4)+x(5)))).^(1/2)\
;\\n\"\>"], "Output",
 CellChangeTimes->{3.780053999382078*^9, 3.780054057471219*^9, 
  3.7800758605973005`*^9, 3.780076206417634*^9, 3.780319710555525*^9, 
  3.780320205653675*^9}],

Cell[BoxData["\<\"[0;0;0;(lf.*ls.*cos(x(4))+lf.*lt.*cos(x(4)+x(5))+(-1).*la.*(\
ls.*sin(x(4))+lt.*sin(x(4)+x(5)))).*(la.^2+lf.^2+ls.^2+lt.^2+2.*(la.*ls.*cos(\
x(4))+ls.*lt.*cos(x(5))+la.*lt.*cos(x(4)+x(5))+lf.*ls.*sin(x(4))+lf.*lt.*sin(\
x(4)+x(5)))).^(-1/2);lt.*(lf.*cos(x(4)+x(5))+(-1).*ls.*sin(x(5))+(-1).*la.*\
sin(x(4)+x(5))).*(la.^2+lf.^2+ls.^2+lt.^2+2.*(la.*ls.*cos(x(4))+ls.*lt.*cos(x(\
5))+la.*lt.*cos(x(4)+x(5))+lf.*ls.*sin(x(4))+lf.*lt.*sin(x(4)+x(5)))).^(-1/2);\
0;0;0];\\n\"\>"], "Output",
 CellChangeTimes->{3.780053999382078*^9, 3.780054057471219*^9, 
  3.7800758605973005`*^9, 3.780076206417634*^9, 3.780319710555525*^9, 
  3.780320205653675*^9}]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{
  "toplevelfolder", " ", "=", " ", 
   "\"\<Z:\\\\Member Folders\\\\Mark \
Yeatman\\\\Codes\\\\Matlab\\\\StandardizedCode\\\\Derivations\\\\\
ToMatlabOutputs\\\\\>\""}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"configfolder", " ", "=", " ", 
  "\"\<ProsthesisHeelFrame\\\\\>\""}]}], "Input",
 CellChangeTimes->{{3.7668473967462254`*^9, 3.7668474024564037`*^9}, {
   3.7668474695593543`*^9, 3.7668474697558975`*^9}, {3.766847784087072*^9, 
   3.7668478419757366`*^9}, {3.7668480710616474`*^9, 3.766848091110597*^9}, {
   3.7668504617836914`*^9, 3.7668504802969027`*^9}, {3.7668506719744034`*^9, 
   3.766850685815195*^9}, {3.766853071465933*^9, 3.7668530716932955`*^9}, {
   3.7668531185865545`*^9, 3.7668531205381513`*^9}, {3.7668533695450726`*^9, 
   3.766853390729023*^9}, {3.7668540747274265`*^9, 3.7668540786947384`*^9}, {
   3.766854399462119*^9, 3.766854477603095*^9}, 3.7668545798447995`*^9, {
   3.766854952258715*^9, 3.766854973488822*^9}, {3.766855039073496*^9, 
   3.766855052017766*^9}, {3.7686547375662546`*^9, 3.7686547427169833`*^9}, {
   3.771605832033862*^9, 3.771605839537809*^9}, {3.772277780441394*^9, 
   3.772277856473636*^9}, {3.772279549692916*^9, 3.7722795606940947`*^9}, {
   3.7722796223555145`*^9, 3.772279622675598*^9}, 3.772279923053319*^9, {
   3.772280051875898*^9, 3.7722800532501335`*^9}, 3.7724712823764505`*^9, {
   3.772544319812922*^9, 3.7725443260688457`*^9}, {3.7778180168305063`*^9, 
   3.777818063490815*^9}, {3.7778183190733128`*^9, 3.7778183490397363`*^9}, {
   3.7778185165591946`*^9, 3.7778185469889517`*^9}, {3.777901679193923*^9, 
   3.7779017110013313`*^9}, {3.777902180651893*^9, 3.7779021807915163`*^9}, {
   3.777902374229483*^9, 3.7779023749006786`*^9}, {3.7779186193079967`*^9, 
   3.77791861948753*^9}, {3.7784385696715817`*^9, 3.778438572871893*^9}, 
   3.7794519595319333`*^9, {3.7800538139773397`*^9, 3.780053820957632*^9}, 
   3.780054517893894*^9}],

Cell[BoxData["\<\"ProsthesisHeelFrame\\\\\"\>"], "Output",
 CellChangeTimes->{3.780053999406995*^9, 3.7800540574971695`*^9, 
  3.780075860617648*^9, 3.7800762064275703`*^9, 3.7803197105655317`*^9, 
  3.7803202056741366`*^9}]
}, Open  ]],

Cell[BoxData[{
 RowBox[{
  RowBox[{"folder", " ", "=", " ", 
   RowBox[{"StringJoin", "[", 
    RowBox[{
    "toplevelfolder", ",", "configfolder", ",", 
     "\"\<KinematicFunctions\\\\\>\""}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{"With", "[", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{"dirname", "=", "folder"}], "}"}], ",", 
   RowBox[{"Switch", "[", 
    RowBox[{
     RowBox[{"FileType", "[", "dirname", "]"}], ",", "None", ",", 
     RowBox[{"CreateDirectory", "[", "dirname", "]"}], " ", 
     RowBox[{"(*", 
      RowBox[{"create", " ", "dir"}], "*)"}], ",", "Directory", ",", "Null", 
     " ", 
     RowBox[{"(*", 
      RowBox[{"do", " ", "nothing"}], "*)"}], ",", "File", ",", 
     RowBox[{
     "Print", "[", "\"\<File with same name already exists!!\>\"", "]"}]}], 
    " ", 
    RowBox[{"(*", 
     RowBox[{"error", "!"}], "*)"}], "]"}]}], "]"}]}], "Input"],

Cell[BoxData[{
 RowBox[{"WriteMatlab", "[", 
  RowBox[{"L1", ",", 
   RowBox[{"StringJoin", "[", 
    RowBox[{"folder", ",", "\"\<SpringLengthFlatHeel.m\>\""}], "]"}], ",", 
   "LFlatHeel"}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"WriteMatlab", "[", 
  RowBox[{"LJacob1", ",", 
   RowBox[{"StringJoin", "[", 
    RowBox[{"folder", ",", "\"\<SpringJacobianFlatHeel.m\>\""}], "]"}], ",", 
   "LJacobFlatHeel"}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"WriteMatlab", "[", 
  RowBox[{"L1dot", ",", 
   RowBox[{"StringJoin", "[", 
    RowBox[{"folder", ",", "\"\<SpringVelocityFlatHeel.m\>\""}], "]"}], ",", 
   "LdotFlatHeel"}], "]"}]}], "Input",
 CellChangeTimes->{{3.7800538689121275`*^9, 3.7800539301674557`*^9}, {
  3.780053982717499*^9, 3.7800539863820534`*^9}, {3.780075836827755*^9, 
  3.780075851807619*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"configfolder", " ", "=", " ", 
  "\"\<ProsthesisCurvedFoot\\\\\>\""}]], "Input",
 CellChangeTimes->{{3.7668473967462254`*^9, 3.7668474024564037`*^9}, {
   3.7668474695593543`*^9, 3.7668474697558975`*^9}, {3.766847784087072*^9, 
   3.7668478419757366`*^9}, {3.7668480710616474`*^9, 3.766848091110597*^9}, {
   3.7668504617836914`*^9, 3.7668504802969027`*^9}, {3.7668506719744034`*^9, 
   3.766850685815195*^9}, {3.766853071465933*^9, 3.7668530716932955`*^9}, {
   3.7668531185865545`*^9, 3.7668531205381513`*^9}, {3.7668533695450726`*^9, 
   3.766853390729023*^9}, {3.7668540747274265`*^9, 3.7668540786947384`*^9}, {
   3.766854399462119*^9, 3.766854477603095*^9}, 3.7668545798447995`*^9, {
   3.766854952258715*^9, 3.766854973488822*^9}, {3.766855039073496*^9, 
   3.766855052017766*^9}, {3.7686547375662546`*^9, 3.7686547427169833`*^9}, {
   3.771605832033862*^9, 3.771605839537809*^9}, {3.772277780441394*^9, 
   3.772277856473636*^9}, {3.772279549692916*^9, 3.7722795606940947`*^9}, {
   3.7722796223555145`*^9, 3.772279622675598*^9}, 3.772279923053319*^9, {
   3.772280051875898*^9, 3.7722800532501335`*^9}, 3.7724712823764505`*^9, {
   3.772544319812922*^9, 3.7725443260688457`*^9}, {3.7778180168305063`*^9, 
   3.777818063490815*^9}, {3.7778183190733128`*^9, 3.7778183490397363`*^9}, {
   3.7778185165591946`*^9, 3.7778185469889517`*^9}, {3.777901679193923*^9, 
   3.7779017110013313`*^9}, {3.777902180651893*^9, 3.7779021807915163`*^9}, {
   3.777902374229483*^9, 3.7779023749006786`*^9}, {3.7779186193079967`*^9, 
   3.77791861948753*^9}, {3.7784385696715817`*^9, 3.778438572871893*^9}, 
   3.7794519595319333`*^9, {3.7800538139773397`*^9, 3.780053820957632*^9}, 
   3.780054517893894*^9, {3.780319566035736*^9, 3.78031958293602*^9}}],

Cell[BoxData["\<\"ProsthesisCurvedFoot\\\\\"\>"], "Output",
 CellChangeTimes->{3.780319710638545*^9, 3.7803202057340307`*^9}]
}, Open  ]],

Cell[BoxData[{
 RowBox[{
  RowBox[{"folder", " ", "=", " ", 
   RowBox[{"StringJoin", "[", 
    RowBox[{
    "toplevelfolder", ",", "configfolder", ",", 
     "\"\<KinematicFunctions\\\\\>\""}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{"With", "[", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{"dirname", "=", "folder"}], "}"}], ",", 
   RowBox[{"Switch", "[", 
    RowBox[{
     RowBox[{"FileType", "[", "dirname", "]"}], ",", "None", ",", 
     RowBox[{"CreateDirectory", "[", "dirname", "]"}], " ", 
     RowBox[{"(*", 
      RowBox[{"create", " ", "dir"}], "*)"}], ",", "Directory", ",", "Null", 
     " ", 
     RowBox[{"(*", 
      RowBox[{"do", " ", "nothing"}], "*)"}], ",", "File", ",", 
     RowBox[{
     "Print", "[", "\"\<File with same name already exists!!\>\"", "]"}]}], 
    " ", 
    RowBox[{"(*", 
     RowBox[{"error", "!"}], "*)"}], "]"}]}], "]"}]}], "Input"],

Cell[BoxData[{
 RowBox[{"ToMatlab", "[", "L3", "]"}], "\[IndentingNewLine]", 
 RowBox[{"ToMatlab", "[", "LJacob3", "]"}], "\[IndentingNewLine]", 
 RowBox[{"WriteMatlab", "[", 
  RowBox[{"L3", ",", 
   RowBox[{"StringJoin", "[", 
    RowBox[{"folder", ",", "\"\<SpringLengthCurvedFoot.m\>\""}], "]"}], ",", 
   "LCurved"}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"WriteMatlab", "[", 
  RowBox[{"LJacob3", ",", 
   RowBox[{"StringJoin", "[", 
    RowBox[{"folder", ",", "\"\<SpringJacobianCurvedFoot.m\>\""}], "]"}], ",",
    "LJacobCurved"}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"WriteMatlab", "[", 
  RowBox[{"L3dot", ",", 
   RowBox[{"StringJoin", "[", 
    RowBox[{"folder", ",", "\"\<SpringVelocityCurvedFoot.m\>\""}], "]"}], ",",
    "LdotCurved"}], "]"}]}], "Input",
 CellChangeTimes->{{3.7800538689121275`*^9, 3.7800539301674557`*^9}, {
  3.780053982717499*^9, 3.7800539863820534`*^9}, {3.780075836827755*^9, 
  3.780075851807619*^9}, {3.780319589046056*^9, 3.78031958923621*^9}, {
  3.7803196213385787`*^9, 3.7803196335558443`*^9}, {3.780319701595764*^9, 
  3.780319703575733*^9}, {3.780320153334499*^9, 3.7803201610641613`*^9}, {
  3.7803204873636236`*^9, 3.780320492533388*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"Unset", "[", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"x1", "[", "t", "]"}], ",", " ", 
     RowBox[{"x2", "[", "t", "]"}], ",", " ", 
     RowBox[{"x3", "[", "t", "]"}], ",", " ", 
     RowBox[{"x4", "[", "t", "]"}], ",", 
     RowBox[{"x5", "[", "t", "]"}], ",", 
     RowBox[{"x6", "[", "t", "]"}], ",", 
     RowBox[{
      RowBox[{"x1", "'"}], "[", "t", "]"}], ",", " ", 
     RowBox[{
      RowBox[{"x2", "'"}], "[", "t", "]"}], ",", " ", 
     RowBox[{
      RowBox[{"x3", "'"}], "[", "t", "]"}], ",", " ", 
     RowBox[{
      RowBox[{"x4", "'"}], "[", "t", "]"}], ",", " ", 
     RowBox[{
      RowBox[{"x5", "'"}], "[", "t", "]"}], ",", 
     RowBox[{
      RowBox[{"x6", "'"}], "[", "t", "]"}], ",", " ", 
     RowBox[{
      RowBox[{"x1", "''"}], "[", "t", "]"}], ",", " ", 
     RowBox[{
      RowBox[{"x2", "''"}], "[", "t", "]"}], ",", " ", 
     RowBox[{
      RowBox[{"x3", "''"}], "[", "t", "]"}], ",", 
     RowBox[{
      RowBox[{"x4", "''"}], "[", "t", "]"}], ",", 
     RowBox[{
      RowBox[{"x5", "''"}], "[", "t", "]"}], ",", 
     RowBox[{
      RowBox[{"x6", "''"}], "[", "t", "]"}]}], "}"}], "]"}], ";"}]], "Input",
 CellChangeTimes->{{3.766934307338765*^9, 3.7669344074321623`*^9}}],

Cell[BoxData[
 RowBox[{
  StyleBox[
   RowBox[{"Unset", "::", "norep"}], "MessageName"], 
  RowBox[{
  ":", " "}], "\<\"Assignment on \[NoBreak]\\!\\(\\*RowBox[{\\\"x6\\\"}]\\)\
\[NoBreak] for \[NoBreak]\\!\\(\\*RowBox[{\\\"x6\\\", \\\"[\\\", \\\"t\\\", \
\\\"]\\\"}]\\)\[NoBreak] not found. \\!\\(\\*ButtonBox[\\\"\[RightSkeleton]\\\
\", ButtonStyle->\\\"Link\\\", ButtonFrame->None, \
ButtonData:>\\\"paclet:ref/message/Unset/norep\\\", ButtonNote -> \
\\\"Unset::norep\\\"]\\)\"\>"}]], "Message", "MSG",
 CellChangeTimes->{3.780076206599848*^9, 3.780319710875695*^9, 
  3.780320205824086*^9}],

Cell[BoxData[
 RowBox[{
  StyleBox[
   RowBox[{"Unset", "::", "norep"}], "MessageName"], 
  RowBox[{
  ":", " "}], "\<\"Assignment on \
\[NoBreak]\\!\\(\\*RowBox[{\\\"Derivative\\\"}]\\)\[NoBreak] for \
\[NoBreak]\\!\\(\\*RowBox[{SuperscriptBox[\\\"x6\\\", \\\"\[Prime]\\\", \
Rule[MultilineFunction, None]], \\\"[\\\", \\\"t\\\", \
\\\"]\\\"}]\\)\[NoBreak] not found. \\!\\(\\*ButtonBox[\\\"\[RightSkeleton]\\\
\", ButtonStyle->\\\"Link\\\", ButtonFrame->None, \
ButtonData:>\\\"paclet:ref/message/Unset/norep\\\", ButtonNote -> \
\\\"Unset::norep\\\"]\\)\"\>"}]], "Message", "MSG",
 CellChangeTimes->{3.780076206599848*^9, 3.780319710875695*^9, 
  3.780320205843729*^9}]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Open Chain Kinematics (Static Hip Reference Frame)", "Section",
 CellChangeTimes->{{3.587054562815436*^9, 3.5870545683829927`*^9}, 
   3.7639210008236065`*^9, {3.763922322016376*^9, 3.763922332416171*^9}, {
   3.779809174261571*^9, 3.7798091997304792`*^9}}],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"y", "=", " ", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"y1", "[", "t", "]"}], "}"}], ",", 
      RowBox[{"{", 
       RowBox[{"y2", "[", "t", "]"}], "}"}], ",", 
      RowBox[{"{", 
       RowBox[{"y3", "[", "t", "]"}], "}"}]}], "}"}]}], ";"}], " ", 
  "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{"CoPx", ",", " ", "CoPy", ",", " ", 
    RowBox[{"heel", " ", "angle"}], ",", " ", 
    RowBox[{"ankle", " ", "angle"}], ",", " ", 
    RowBox[{"stance", " ", "knee", " ", "angle"}], ",", " ", 
    RowBox[{"hip", " ", "angle"}], ",", " ", 
    RowBox[{"swing", " ", "knee", " ", "angle"}], ",", " ", 
    RowBox[{"swing", " ", "ankle", " ", "angle"}]}], " ", 
   "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"ydot", " ", "=", " ", 
   RowBox[{"D", "[", 
    RowBox[{"y", ",", "t"}], "]"}]}], ";", " ", 
  RowBox[{"yddot", " ", "=", " ", 
   RowBox[{"D", "[", 
    RowBox[{"ydot", ",", "t"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"l", " ", "=", " ", 
   RowBox[{"la", "+", "ls", "+", "lt"}]}], ";"}]}], "Input",
 CellChangeTimes->{
  3.5111737472017937`*^9, {3.511173782073788*^9, 3.5111737868600616`*^9}, {
   3.5111755940464272`*^9, 3.511175600408791*^9}, {3.520686131703125*^9, 
   3.520686135875*^9}, {3.520686309671875*^9, 3.520686312484375*^9}, {
   3.520687115453125*^9, 3.5206871275625*^9}, {3.52078867884375*^9, 
   3.52078872540625*^9}, {3.520857852828125*^9, 3.520857856765625*^9}, {
   3.521820034578125*^9, 3.52182003665625*^9}, {3.521820194515625*^9, 
   3.52182019925*^9}, {3.521911060609375*^9, 3.52191106496875*^9}, 
   3.5219945113125*^9, {3.523028145328125*^9, 3.523028147203125*^9}, 
   3.523028568734375*^9, {3.523033556203125*^9, 3.5230335580625*^9}, {
   3.52303366240625*^9, 3.523033664046875*^9}, {3.5232996586875*^9, 
   3.523299669890625*^9}, 3.523299712796875*^9, {3.52330022171875*^9, 
   3.523300234421875*^9}, {3.52330028559375*^9, 3.52330029028125*^9}, 
   3.5233008249375*^9, {3.523360415484375*^9, 3.523360421828125*^9}, {
   3.523380309234375*^9, 3.52338031990625*^9}, {3.523380358796875*^9, 
   3.523380364234375*^9}, {3.5287165611401763`*^9, 3.5287165746088295`*^9}, {
   3.543073868103307*^9, 3.543073894812307*^9}, 3.5430739902623067`*^9, {
   3.5430742662443066`*^9, 3.543074273445307*^9}, 3.5430744729683065`*^9, {
   3.5430748729733067`*^9, 3.5430748749423065`*^9}, {3.555095285078673*^9, 
   3.5550952976686726`*^9}, {3.5553255793781047`*^9, 3.555325590112178*^9}, 
   3.5559492285885787`*^9, {3.587054558588013*^9, 3.587054560969251*^9}, {
   3.7639210046785345`*^9, 3.763921006646368*^9}, {3.7639223376326623`*^9, 
   3.7639223408171253`*^9}, {3.7639888827120976`*^9, 3.763988883260669*^9}, {
   3.7639889168895807`*^9, 3.7639889213377137`*^9}, {3.77980920402662*^9, 
   3.779809243011238*^9}}],

Cell[BoxData[{
 RowBox[{
  RowBox[{"bx1", " ", "=", " ", 
   RowBox[{"RevoluteTwist", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"0", ",", "0", ",", "0"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"0", ",", "0", ",", "1"}], "}"}]}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"bx2", " ", "=", " ", 
   RowBox[{"RevoluteTwist", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"0", ",", 
       RowBox[{"-", "lt"}], ",", "0"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"0", ",", "0", ",", "1"}], "}"}]}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"bx3", " ", "=", " ", 
    RowBox[{"RevoluteTwist", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"0", ",", 
        RowBox[{
         RowBox[{"-", "lt"}], "-", "ls"}], ",", "0"}], "}"}], ",", 
      RowBox[{"{", 
       RowBox[{"0", ",", "0", ",", "1"}], "}"}]}], "]"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"MatrixForm", "[", 
   RowBox[{"f1", " ", "=", " ", 
    RowBox[{"TwistExp", "[", 
     RowBox[{"bx1", ",", 
      RowBox[{"y1", "[", "t", "]"}]}], "]"}]}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"MatrixForm", "[", 
   RowBox[{"f2", " ", "=", " ", 
    RowBox[{"TwistExp", "[", 
     RowBox[{"bx2", ",", 
      RowBox[{"y2", "[", "t", "]"}]}], "]"}]}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"MatrixForm", "[", 
   RowBox[{"f3", " ", "=", " ", 
    RowBox[{"TwistExp", "[", 
     RowBox[{"bx3", ",", 
      RowBox[{"y3", "[", "t", "]"}]}], "]"}]}], "]"}], ";"}]}], "Input",
 CellChangeTimes->{{3.520686144890625*^9, 3.520686145203125*^9}, {
   3.52068617653125*^9, 3.520686205625*^9}, {3.520686284921875*^9, 
   3.520686305984375*^9}, {3.520686374484375*^9, 3.520686441609375*^9}, {
   3.52068650903125*^9, 3.520686509140625*^9}, {3.52068656871875*^9, 
   3.520686617546875*^9}, {3.5206873421875*^9, 3.520687418140625*^9}, {
   3.5207688911875*^9, 3.520768891421875*^9}, {3.5208577891875*^9, 
   3.5208577938125*^9}, {3.52182001190625*^9, 3.521820023734375*^9}, {
   3.521911082890625*^9, 3.52191115175*^9}, {3.52191125971875*^9, 
   3.521911294796875*^9}, {3.521911335375*^9, 3.5219113548125*^9}, {
   3.5219119563125*^9, 3.521911956390625*^9}, {3.521994532609375*^9, 
   3.521994535875*^9}, {3.52206939596875*^9, 3.5220694045625*^9}, {
   3.523028084703125*^9, 3.523028115890625*^9}, 3.523028291140625*^9, 
   3.523033323140625*^9, 3.523033450765625*^9, {3.52303353259375*^9, 
   3.5230335539375*^9}, {3.5230373085*^9, 3.52303737340625*^9}, {
   3.523037467328125*^9, 3.52303746903125*^9}, 3.52330047*^9, {
   3.523358999328125*^9, 3.52335906684375*^9}, {3.523360273125*^9, 
   3.523360357953125*^9}, {3.5233608009375*^9, 3.523360804421875*^9}, {
   3.52336423246875*^9, 3.52336423984375*^9}, 3.528716608959394*^9, {
   3.5378114879773455`*^9, 3.5378114882175856`*^9}, {3.539014808319905*^9, 
   3.5390148139360275`*^9}, {3.543073943307307*^9, 3.543074019945307*^9}, {
   3.5430740586903067`*^9, 3.543074064726307*^9}, {3.543075246569307*^9, 
   3.5430752470013065`*^9}, {3.5431422985871916`*^9, 3.543142308314192*^9}, {
   3.5439277592067757`*^9, 3.5439277644517756`*^9}, {3.5439278106917753`*^9, 
   3.5439278108357754`*^9}, {3.5551529968463793`*^9, 3.555153041439379*^9}, {
   3.5553255954747143`*^9, 3.555325607990966*^9}, {3.555949225987579*^9, 
   3.5559492261145787`*^9}, 3.763920382649495*^9, {3.7779154880375853`*^9, 
   3.777915489791995*^9}, {3.7779155558626766`*^9, 3.777915584522359*^9}, {
   3.7779156312055073`*^9, 3.777915668341381*^9}, {3.779809259057761*^9, 
   3.779809338682758*^9}, {3.7798104533207245`*^9, 3.7798104552379637`*^9}, {
   3.779810491820523*^9, 3.7798104931798897`*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{"Reference", " ", "Configuration"}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{
   "Position", " ", "Configuration", " ", "of", " ", "Centers", " ", "of", 
    " ", "Mass"}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"g00", " ", "=", " ", 
     RowBox[{"RPToHomogeneous", "[", 
      RowBox[{
       RowBox[{"IdentityMatrix", "[", "3", "]"}], ",", 
       RowBox[{"{", 
        RowBox[{"0", ",", 
         RowBox[{
          RowBox[{"-", "lt"}], "/", "2"}], ",", "0"}], "}"}]}], "]"}]}], ";", 
    "  ", 
    RowBox[{"(*", 
     RowBox[{"thigh", " ", "CoM", " ", "pos"}], "*)"}], "\[IndentingNewLine]", 
    RowBox[{"g01", " ", "=", " ", 
     RowBox[{"RPToHomogeneous", "[", 
      RowBox[{
       RowBox[{"IdentityMatrix", "[", "3", "]"}], ",", 
       RowBox[{"{", 
        RowBox[{"0", ",", 
         RowBox[{
          RowBox[{"-", "lt"}], "-", 
          RowBox[{"ls", "/", "2"}]}], ",", "0"}], "}"}]}], "]"}]}], ";", "  ", 
    RowBox[{"(*", 
     RowBox[{"shank", " ", "CoM", " ", "pos"}], "*)"}], "\[IndentingNewLine]", 
    RowBox[{"g02", " ", "=", " ", 
     RowBox[{"RPToHomogeneous", "[", 
      RowBox[{
       RowBox[{"IdentityMatrix", "[", "3", "]"}], ",", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"lf", "/", "2"}], ",", 
         RowBox[{
          RowBox[{"-", "lt"}], "-", "ls", "-", "la"}], ",", " ", "0"}], 
        "}"}]}], "]"}]}], ";"}], "  ", 
   RowBox[{"(*", 
    RowBox[{"foot", " ", "CoM", " ", "pos"}], "*)"}], "\[IndentingNewLine]", 
   "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{"Position", " ", "Configuration", " ", "of", " ", "Joints"}], 
    "*)"}], " ", 
   RowBox[{"(*", 
    RowBox[{
    "With", " ", "Inertial", " ", "Reference", " ", "Frame", " ", "Origin", 
     " ", "at", " ", "stance", " ", "heel"}], "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"gj0", " ", "=", " ", 
     RowBox[{"RPToHomogeneous", "[", 
      RowBox[{
       RowBox[{"IdentityMatrix", "[", "3", "]"}], ",", 
       RowBox[{"{", 
        RowBox[{"0", ",", "0", ",", "0"}], "}"}]}], "]"}]}], ";", "  ", 
    RowBox[{"(*", 
     RowBox[{"hip", " ", "pos"}], "*)"}], "\[IndentingNewLine]", 
    RowBox[{"gj1", " ", "=", " ", 
     RowBox[{"RPToHomogeneous", "[", 
      RowBox[{
       RowBox[{"IdentityMatrix", "[", "3", "]"}], ",", 
       RowBox[{"{", 
        RowBox[{"0", ",", 
         RowBox[{"-", "lt"}], ",", "0"}], "}"}]}], "]"}]}], ";", "  ", 
    RowBox[{"(*", 
     RowBox[{"knee", " ", "pos"}], "*)"}], "\[IndentingNewLine]", 
    RowBox[{"gj2", " ", "=", " ", 
     RowBox[{"RPToHomogeneous", "[", 
      RowBox[{
       RowBox[{"IdentityMatrix", "[", "3", "]"}], ",", 
       RowBox[{"{", 
        RowBox[{"0", ",", 
         RowBox[{
          RowBox[{"-", "lt"}], "-", "ls"}], ",", " ", "0"}], "}"}]}], "]"}]}],
     ";", "  ", 
    RowBox[{"(*", 
     RowBox[{"ankle", " ", "pos"}], "*)"}], "\[IndentingNewLine]", 
    RowBox[{"gj3", " ", "=", " ", 
     RowBox[{"RPToHomogeneous", "[", 
      RowBox[{
       RowBox[{"IdentityMatrix", "[", "3", "]"}], ",", 
       RowBox[{"{", 
        RowBox[{"0", ",", 
         RowBox[{
          RowBox[{"-", "lt"}], "-", "ls", "-", "la"}], ",", "0"}], "}"}]}], 
      "]"}]}], ";", "  ", 
    RowBox[{"(*", 
     RowBox[{"heel", " ", "pos"}], "*)"}], "\[IndentingNewLine]", 
    RowBox[{"gj4", " ", "=", " ", 
     RowBox[{"RPToHomogeneous", "[", 
      RowBox[{
       RowBox[{"IdentityMatrix", "[", "3", "]"}], ",", 
       RowBox[{"{", 
        RowBox[{"lf", ",", 
         RowBox[{
          RowBox[{"-", "lt"}], "-", "ls", "-", "la"}], ",", " ", "0"}], 
        "}"}]}], "]"}]}], ";", "  ", 
    RowBox[{"(*", 
     RowBox[{"toe", " ", "pos"}], "*)"}], "\[IndentingNewLine]", 
    RowBox[{"(*", 
     RowBox[{"swing", " ", "point", " ", "foot", " ", "pos"}], 
     "*)"}]}]}]}]], "Input",
 CellChangeTimes->{{3.52068675271875*^9, 3.5206868401875*^9}, {
   3.52068688309375*^9, 3.520686884765625*^9}, {3.5206869316875*^9, 
   3.52068695546875*^9}, {3.52068703525*^9, 3.5206870995*^9}, {
   3.52068721059375*^9, 3.5206872309375*^9}, {3.520687329875*^9, 
   3.520687335984375*^9}, {3.520687447921875*^9, 3.520687482640625*^9}, {
   3.52085775021875*^9, 3.5208577569375*^9}, {3.52182002690625*^9, 
   3.521820029890625*^9}, {3.52199454090625*^9, 3.5219945435625*^9}, {
   3.521994576609375*^9, 3.521994577125*^9}, 3.522069407859375*^9, {
   3.52302817175*^9, 3.52302817784375*^9}, {3.52302821046875*^9, 
   3.523028219296875*^9}, {3.52302827453125*^9, 3.523028289421875*^9}, {
   3.52303357528125*^9, 3.523033624796875*^9}, {3.5232999903125*^9, 
   3.523300034796875*^9}, {3.52330072346875*^9, 3.52330075775*^9}, {
   3.5387617592355986`*^9, 3.538761759396615*^9}, {3.5387617916248374`*^9, 
   3.5387617925049257`*^9}, {3.543074082165307*^9, 3.543074148335307*^9}, {
   3.543074210203307*^9, 3.5430743652183065`*^9}, {3.543074567731307*^9, 
   3.543074573234307*^9}, {3.5551530722213793`*^9, 3.555153123128379*^9}, {
   3.5551548714599023`*^9, 3.555154880689748*^9}, {3.7638166935451756`*^9, 
   3.76381674183117*^9}, {3.7639203529556055`*^9, 3.7639203532584653`*^9}, 
   3.777915741587598*^9, {3.777915829761903*^9, 3.7779159177626963`*^9}, {
   3.7779159515282807`*^9, 3.777916003113441*^9}, {3.7779160400165005`*^9, 
   3.777916110144987*^9}, {3.7779161407274213`*^9, 3.777916143287918*^9}, {
   3.7779195888114386`*^9, 3.7779197056350513`*^9}, {3.777919750640922*^9, 
   3.777919834642557*^9}, {3.777919896262021*^9, 3.777920009221264*^9}, {
   3.77824242292951*^9, 3.778242429459546*^9}, {3.7798008166809053`*^9, 
   3.7798008169661036`*^9}, {3.7798093479171934`*^9, 3.779809497182501*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{"Positions", " ", "of", " ", 
    RowBox[{"COM", "'"}], "s"}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"MatrixForm", "[", 
     RowBox[{"posThigh", " ", "=", " ", 
      RowBox[{
       RowBox[{"f1", ".", "g00"}], " ", "//", "FullSimplify"}]}], "]"}], 
    ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"MatrixForm", "[", 
     RowBox[{"posShank", "=", " ", 
      RowBox[{
       RowBox[{"f1", ".", "f2", ".", "g01"}], "//", "FullSimplify"}]}], "]"}],
     ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"MatrixForm", "[", 
     RowBox[{"posFoot", " ", "=", " ", 
      RowBox[{
       RowBox[{"f1", ".", "f2", ".", "f3", ".", "g02"}], "//", 
       "FullSimplify"}]}], "]"}], ";"}], "\[IndentingNewLine]", 
   "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{"Positions", " ", "of", " ", 
     RowBox[{"Joints", "'"}], "s"}], "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"MatrixForm", "[", 
     RowBox[{"posKnee", " ", "=", " ", 
      RowBox[{
       RowBox[{"f1", ".", "gj1"}], "//", "FullSimplify"}]}], "]"}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"MatrixForm", "[", 
     RowBox[{"posAnkle", "=", " ", 
      RowBox[{
       RowBox[{"f1", ".", "f2", ".", "gj2"}], " ", "//", "FullSimplify"}]}], 
     "]"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"MatrixForm", "[", 
     RowBox[{"posHeel", "=", " ", 
      RowBox[{
       RowBox[{"f1", ".", "f2", ".", "f3", ".", "gj3"}], " ", "//", 
       "FullSimplify"}]}], "]"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{"MatrixForm", "[", 
    RowBox[{"posToe", "=", " ", 
     RowBox[{
      RowBox[{"f1", ".", "f2", ".", "f3", ".", "gj4"}], " ", "//", 
      "FullSimplify"}]}], "]"}]}]}]], "Input",
 CellChangeTimes->{{3.777916229424477*^9, 3.777916270381218*^9}, {
   3.7779163127880306`*^9, 3.777916347846925*^9}, {3.777917702260448*^9, 
   3.7779177166249943`*^9}, {3.777920031602582*^9, 3.777920129651227*^9}, {
   3.778242379154322*^9, 3.778242436913762*^9}, 3.779629019961957*^9, {
   3.779809520369829*^9, 3.779809588338895*^9}, {3.779809666119897*^9, 
   3.7798097587139406`*^9}, 3.779810318868487*^9}],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {
      RowBox[{"Cos", "[", 
       RowBox[{
        RowBox[{"y1", "[", "t", "]"}], "+", 
        RowBox[{"y2", "[", "t", "]"}], "+", 
        RowBox[{"y3", "[", "t", "]"}]}], "]"}], 
      RowBox[{"-", 
       RowBox[{"Sin", "[", 
        RowBox[{
         RowBox[{"y1", "[", "t", "]"}], "+", 
         RowBox[{"y2", "[", "t", "]"}], "+", 
         RowBox[{"y3", "[", "t", "]"}]}], "]"}]}], "0", 
      RowBox[{
       RowBox[{"lf", " ", 
        RowBox[{"Cos", "[", 
         RowBox[{
          RowBox[{"y1", "[", "t", "]"}], "+", 
          RowBox[{"y2", "[", "t", "]"}], "+", 
          RowBox[{"y3", "[", "t", "]"}]}], "]"}]}], "+", 
       RowBox[{"lt", " ", 
        RowBox[{"Sin", "[", 
         RowBox[{"y1", "[", "t", "]"}], "]"}]}], "+", 
       RowBox[{"ls", " ", 
        RowBox[{"Sin", "[", 
         RowBox[{
          RowBox[{"y1", "[", "t", "]"}], "+", 
          RowBox[{"y2", "[", "t", "]"}]}], "]"}]}], "+", 
       RowBox[{"la", " ", 
        RowBox[{"Sin", "[", 
         RowBox[{
          RowBox[{"y1", "[", "t", "]"}], "+", 
          RowBox[{"y2", "[", "t", "]"}], "+", 
          RowBox[{"y3", "[", "t", "]"}]}], "]"}]}]}]},
     {
      RowBox[{"Sin", "[", 
       RowBox[{
        RowBox[{"y1", "[", "t", "]"}], "+", 
        RowBox[{"y2", "[", "t", "]"}], "+", 
        RowBox[{"y3", "[", "t", "]"}]}], "]"}], 
      RowBox[{"Cos", "[", 
       RowBox[{
        RowBox[{"y1", "[", "t", "]"}], "+", 
        RowBox[{"y2", "[", "t", "]"}], "+", 
        RowBox[{"y3", "[", "t", "]"}]}], "]"}], "0", 
      RowBox[{
       RowBox[{
        RowBox[{"-", "lt"}], " ", 
        RowBox[{"Cos", "[", 
         RowBox[{"y1", "[", "t", "]"}], "]"}]}], "-", 
       RowBox[{"ls", " ", 
        RowBox[{"Cos", "[", 
         RowBox[{
          RowBox[{"y1", "[", "t", "]"}], "+", 
          RowBox[{"y2", "[", "t", "]"}]}], "]"}]}], "-", 
       RowBox[{"la", " ", 
        RowBox[{"Cos", "[", 
         RowBox[{
          RowBox[{"y1", "[", "t", "]"}], "+", 
          RowBox[{"y2", "[", "t", "]"}], "+", 
          RowBox[{"y3", "[", "t", "]"}]}], "]"}]}], "+", 
       RowBox[{"lf", " ", 
        RowBox[{"Sin", "[", 
         RowBox[{
          RowBox[{"y1", "[", "t", "]"}], "+", 
          RowBox[{"y2", "[", "t", "]"}], "+", 
          RowBox[{"y3", "[", "t", "]"}]}], "]"}]}]}]},
     {"0", "0", "1", "0"},
     {"0", "0", "0", "1"}
    },
    GridBoxAlignment->{
     "Columns" -> {{Center}}, "ColumnsIndexed" -> {}, "Rows" -> {{Baseline}}, 
      "RowsIndexed" -> {}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "ColumnsIndexed" -> {}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}, "RowsIndexed" -> {}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellChangeTimes->{3.77981032236847*^9, 3.7798105284442234`*^9, 
  3.7798111460673246`*^9, 3.7798111833326387`*^9, 3.77981121880105*^9, 
  3.7800540001069117`*^9, 3.7800540581952715`*^9}]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Dynamics", "Section",
 CellChangeTimes->{{3.521995144125*^9, 3.521995144875*^9}, {
   3.526060014172608*^9, 3.5260600152917194`*^9}, {3.543078143146307*^9, 
   3.543078144569307*^9}, 3.5431473723201914`*^9}],

Cell[CellGroupData[{

Cell["DSLIP Embedding", "Subsubsection",
 CellChangeTimes->{{3.7639204805204716`*^9, 3.763920481544552*^9}, {
  3.7639209191915884`*^9, 3.7639209220715466`*^9}, {3.7639224290917854`*^9, 
  3.763922465550254*^9}, {3.766847648630418*^9, 3.7668476514948564`*^9}}],

Cell[BoxData[{
 RowBox[{
  RowBox[{"Hip", " ", "=", 
   RowBox[{"{", 
    RowBox[{"0", ",", "0", ",", "0"}], "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Toe", "=", 
   RowBox[{"posToe", "[", 
    RowBox[{"[", 
     RowBox[{
      RowBox[{"1", ";;", "3"}], ",", "4"}], "]"}], "]"}]}], ";"}]}], "Input",
 CellChangeTimes->{{3.766845505688058*^9, 3.76684553289999*^9}, {
   3.7668455649474115`*^9, 3.7668455969328227`*^9}, {3.7668456976205077`*^9, 
   3.7668457176855545`*^9}, {3.7668458100990033`*^9, 
   3.7668459042453127`*^9}, {3.766845977154875*^9, 3.7668459781451063`*^9}, {
   3.7668460926259336`*^9, 3.7668461072798533`*^9}, {3.766846150273282*^9, 
   3.7668461957155275`*^9}, {3.7668462660170736`*^9, 
   3.7668462688002214`*^9}, {3.7668476363281727`*^9, 3.766847637430479*^9}, 
   3.7668509562465286`*^9, 3.7669255101716204`*^9, {3.766933693325363*^9, 
   3.7669336959598923`*^9}, 3.7779176157591467`*^9, 3.777917647904228*^9, {
   3.7779180828433976`*^9, 3.7779180836784663`*^9}, {3.7779181149456663`*^9, 
   3.7779181240526733`*^9}, {3.7796270938392687`*^9, 3.779627205759345*^9}, 
   3.7796273400884867`*^9, {3.779628547068688*^9, 3.779628552324131*^9}, 
   3.7796289397322674`*^9, {3.7796292874505763`*^9, 3.779629300070824*^9}, {
   3.779629839058929*^9, 3.7796299132381287`*^9}, {3.7796299527432613`*^9, 
   3.7796299586081357`*^9}, {3.779800824706478*^9, 3.779800836725994*^9}, {
   3.779809832119879*^9, 3.7798099105885935`*^9}, {3.779810143213367*^9, 
   3.7798101698924284`*^9}}],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"MatrixForm", "[", 
  RowBox[{"L1", " ", "=", " ", 
   RowBox[{
    RowBox[{"ComplexExpand", "[", 
     RowBox[{
      RowBox[{"Norm", "[", 
       RowBox[{
        RowBox[{"Hip", "-", "Toe"}], ",", "2"}], "]"}], ",", 
      RowBox[{"y", "\[Element]", "Reals"}]}], "]"}], "//", "FullSimplify"}]}],
   "]"}], "\n", 
 RowBox[{"MatrixForm", "[", 
  RowBox[{"LJacob1", "=", " ", 
   RowBox[{
    RowBox[{"Transpose", "[", 
     RowBox[{"{", 
      RowBox[{"D", "[", 
       RowBox[{"L1", ",", 
        RowBox[{"Transpose", "[", "y", "]"}]}], "]"}], "}"}], "]"}], "//", 
    "FullSimplify"}]}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"ToMatlab", "[", "L1", "]"}]}], "Input",
 CellChangeTimes->{{3.436353983078125*^9, 3.436353991234375*^9}, {
   3.436354181125*^9, 3.43635418390625*^9}, 3.5090404416343727`*^9, {
   3.509539414111295*^9, 3.509539527743894*^9}, 3.509539567648764*^9, {
   3.5095401253128805`*^9, 3.5095401303828897`*^9}, {3.5095401706491876`*^9, 
   3.5095401776848*^9}, {3.520767514421875*^9, 3.520767516734375*^9}, {
   3.520767582609375*^9, 3.520767645375*^9}, {3.5207676989375*^9, 
   3.520767715578125*^9}, {3.5230288115*^9, 3.52302884490625*^9}, {
   3.5431472111331916`*^9, 3.5431472276271915`*^9}, {3.5551550672540536`*^9, 
   3.5551550847125444`*^9}, {3.7354013090469794`*^9, 3.7354013272384634`*^9}, 
   3.735402586068088*^9, {3.7355700991070976`*^9, 3.735570100188266*^9}, 
   3.7366221128014383`*^9, {3.7366221436572127`*^9, 3.736622156672744*^9}, {
   3.736694910091427*^9, 3.736694926553073*^9}, {3.7366949728562174`*^9, 
   3.7366949909853835`*^9}, {3.7366951181023893`*^9, 3.736695130005561*^9}, {
   3.740489951746674*^9, 3.7404899555238447`*^9}, 3.74050757733245*^9, {
   3.740998914667108*^9, 3.740998917544409*^9}, {3.740999028057352*^9, 
   3.74099905490458*^9}, {3.7409994625500927`*^9, 3.740999476116825*^9}, {
   3.763816821368079*^9, 3.763816827176324*^9}, {3.7639205215778227`*^9, 
   3.763920532347257*^9}, 3.7639209083266277`*^9, {3.7639209399431157`*^9, 
   3.7639209584073467`*^9}, {3.763921097511383*^9, 3.7639211041267977`*^9}, {
   3.7639211499771085`*^9, 3.763921285050226*^9}, {3.7639213496851053`*^9, 
   3.7639214124362335`*^9}, {3.7639214671401286`*^9, 
   3.7639215203721623`*^9}, {3.7639216283574257`*^9, 3.763921630372426*^9}, {
   3.7639223522122946`*^9, 3.763922383887144*^9}, {3.763922727069458*^9, 
   3.763922745213709*^9}, {3.763922784824605*^9, 3.7639227988798075`*^9}, {
   3.763922834606544*^9, 3.7639228879338*^9}, {3.763922934552292*^9, 
   3.7639229667018213`*^9}, {3.763923086462696*^9, 3.7639231026690593`*^9}, {
   3.7639887699484334`*^9, 3.763988780923917*^9}, {3.763995404359267*^9, 
   3.763995407352643*^9}, {3.7647641067628584`*^9, 3.7647641240427294`*^9}, {
   3.764764457577089*^9, 3.764764464584691*^9}, {3.764765017335846*^9, 
   3.764765029160233*^9}, {3.764765090775797*^9, 3.7647651282472563`*^9}, {
   3.7647653616387916`*^9, 3.764765472982376*^9}, {3.7658890741253223`*^9, 
   3.7658891104274197`*^9}, {3.7658900673785067`*^9, 3.7658900678512373`*^9}, 
   3.7658901155678177`*^9, {3.766839561124361*^9, 3.766839562436724*^9}, {
   3.766844702008257*^9, 3.766844704872295*^9}, {3.766845995746029*^9, 
   3.766846065440652*^9}, {3.766846568909679*^9, 3.766846659885513*^9}, {
   3.766846763292362*^9, 3.7668467645889173`*^9}, 3.7668468076284885`*^9, {
   3.766847193241349*^9, 3.766847206282116*^9}, {3.7668492625775805`*^9, 
   3.7668492660011363`*^9}, {3.766922509191225*^9, 3.7669225159147863`*^9}, {
   3.7669255042177787`*^9, 3.766925504956279*^9}, {3.7669332982472076`*^9, 
   3.766933301396445*^9}, {3.7669336657518044`*^9, 3.7669336699977665`*^9}, {
   3.766933704982257*^9, 3.7669337147985272`*^9}, {3.7722791583093104`*^9, 
   3.7722791773335705`*^9}, {3.7722792335609226`*^9, 
   3.7722792361810074`*^9}, {3.7722796971865225`*^9, 
   3.7722797379874945`*^9}, {3.7778174380129833`*^9, 3.7778174465951676`*^9}, 
   3.777817931871464*^9, {3.779627207979822*^9, 3.779627254029112*^9}, {
   3.7796274326687984`*^9, 3.779627469327773*^9}, {3.7796293161306467`*^9, 
   3.779629318005816*^9}, {3.779800841986126*^9, 3.7798008508896656`*^9}, 
   3.779801013036151*^9, {3.779809106136417*^9, 3.7798091095426435`*^9}, {
   3.779809895558998*^9, 3.779809920416795*^9}}],

Cell[BoxData[
 TagBox[
  SqrtBox[
   RowBox[{
    SuperscriptBox["la", "2"], "+", 
    SuperscriptBox["lf", "2"], "+", 
    SuperscriptBox["ls", "2"], "+", 
    SuperscriptBox["lt", "2"], "+", 
    RowBox[{"2", " ", "ls", " ", "lt", " ", 
     RowBox[{"Cos", "[", 
      RowBox[{"y2", "[", "t", "]"}], "]"}]}], "+", 
    RowBox[{"2", " ", "la", " ", "ls", " ", 
     RowBox[{"Cos", "[", 
      RowBox[{"y3", "[", "t", "]"}], "]"}]}], "+", 
    RowBox[{"2", " ", "la", " ", "lt", " ", 
     RowBox[{"Cos", "[", 
      RowBox[{
       RowBox[{"y2", "[", "t", "]"}], "+", 
       RowBox[{"y3", "[", "t", "]"}]}], "]"}]}], "-", 
    RowBox[{"2", " ", "lf", " ", "ls", " ", 
     RowBox[{"Sin", "[", 
      RowBox[{"y3", "[", "t", "]"}], "]"}]}], "-", 
    RowBox[{"2", " ", "lf", " ", "lt", " ", 
     RowBox[{"Sin", "[", 
      RowBox[{
       RowBox[{"y2", "[", "t", "]"}], "+", 
       RowBox[{"y3", "[", "t", "]"}]}], "]"}]}]}]],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellChangeTimes->{3.779627514523004*^9, 3.7796287355930567`*^9, 
  3.7796289471017814`*^9, 3.779629049951582*^9, 3.7796292754906073`*^9, 
  3.7796293241504335`*^9, 3.77962974463892*^9, 3.7796299245580606`*^9, 
  3.7796299636231933`*^9, 3.779800890309637*^9, 3.779801043030364*^9, 
  3.7798091146672287`*^9, 3.779810114241623*^9, 3.779810202500242*^9, 
  3.77981052881623*^9, 3.7798111463638*^9, 3.779811183738634*^9, 
  3.7798112191817217`*^9, 3.7800540005686874`*^9, 3.780054058616145*^9}],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {"0"},
     {
      RowBox[{"-", 
       FractionBox[
        RowBox[{"lt", " ", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{"lf", " ", 
            RowBox[{"Cos", "[", 
             RowBox[{
              RowBox[{"y2", "[", "t", "]"}], "+", 
              RowBox[{"y3", "[", "t", "]"}]}], "]"}]}], "+", 
           RowBox[{"ls", " ", 
            RowBox[{"Sin", "[", 
             RowBox[{"y2", "[", "t", "]"}], "]"}]}], "+", 
           RowBox[{"la", " ", 
            RowBox[{"Sin", "[", 
             RowBox[{
              RowBox[{"y2", "[", "t", "]"}], "+", 
              RowBox[{"y3", "[", "t", "]"}]}], "]"}]}]}], ")"}]}], 
        SqrtBox[
         RowBox[{
          SuperscriptBox["la", "2"], "+", 
          SuperscriptBox["lf", "2"], "+", 
          SuperscriptBox["ls", "2"], "+", 
          SuperscriptBox["lt", "2"], "+", 
          RowBox[{"2", " ", "ls", " ", "lt", " ", 
           RowBox[{"Cos", "[", 
            RowBox[{"y2", "[", "t", "]"}], "]"}]}], "+", 
          RowBox[{"2", " ", "la", " ", "ls", " ", 
           RowBox[{"Cos", "[", 
            RowBox[{"y3", "[", "t", "]"}], "]"}]}], "+", 
          RowBox[{"2", " ", "la", " ", "lt", " ", 
           RowBox[{"Cos", "[", 
            RowBox[{
             RowBox[{"y2", "[", "t", "]"}], "+", 
             RowBox[{"y3", "[", "t", "]"}]}], "]"}]}], "-", 
          RowBox[{"2", " ", "lf", " ", "ls", " ", 
           RowBox[{"Sin", "[", 
            RowBox[{"y3", "[", "t", "]"}], "]"}]}], "-", 
          RowBox[{"2", " ", "lf", " ", "lt", " ", 
           RowBox[{"Sin", "[", 
            RowBox[{
             RowBox[{"y2", "[", "t", "]"}], "+", 
             RowBox[{"y3", "[", "t", "]"}]}], "]"}]}]}]]]}]},
     {
      RowBox[{"-", 
       FractionBox[
        RowBox[{
         RowBox[{"lf", " ", "ls", " ", 
          RowBox[{"Cos", "[", 
           RowBox[{"y3", "[", "t", "]"}], "]"}]}], "+", 
         RowBox[{"lf", " ", "lt", " ", 
          RowBox[{"Cos", "[", 
           RowBox[{
            RowBox[{"y2", "[", "t", "]"}], "+", 
            RowBox[{"y3", "[", "t", "]"}]}], "]"}]}], "+", 
         RowBox[{"la", " ", "ls", " ", 
          RowBox[{"Sin", "[", 
           RowBox[{"y3", "[", "t", "]"}], "]"}]}], "+", 
         RowBox[{"la", " ", "lt", " ", 
          RowBox[{"Sin", "[", 
           RowBox[{
            RowBox[{"y2", "[", "t", "]"}], "+", 
            RowBox[{"y3", "[", "t", "]"}]}], "]"}]}]}], 
        SqrtBox[
         RowBox[{
          SuperscriptBox["la", "2"], "+", 
          SuperscriptBox["lf", "2"], "+", 
          SuperscriptBox["ls", "2"], "+", 
          SuperscriptBox["lt", "2"], "+", 
          RowBox[{"2", " ", "ls", " ", "lt", " ", 
           RowBox[{"Cos", "[", 
            RowBox[{"y2", "[", "t", "]"}], "]"}]}], "+", 
          RowBox[{"2", " ", "la", " ", "ls", " ", 
           RowBox[{"Cos", "[", 
            RowBox[{"y3", "[", "t", "]"}], "]"}]}], "+", 
          RowBox[{"2", " ", "la", " ", "lt", " ", 
           RowBox[{"Cos", "[", 
            RowBox[{
             RowBox[{"y2", "[", "t", "]"}], "+", 
             RowBox[{"y3", "[", "t", "]"}]}], "]"}]}], "-", 
          RowBox[{"2", " ", "lf", " ", "ls", " ", 
           RowBox[{"Sin", "[", 
            RowBox[{"y3", "[", "t", "]"}], "]"}]}], "-", 
          RowBox[{"2", " ", "lf", " ", "lt", " ", 
           RowBox[{"Sin", "[", 
            RowBox[{
             RowBox[{"y2", "[", "t", "]"}], "+", 
             RowBox[{"y3", "[", "t", "]"}]}], "]"}]}]}]]]}]}
    },
    GridBoxAlignment->{
     "Columns" -> {{Center}}, "ColumnsIndexed" -> {}, "Rows" -> {{Baseline}}, 
      "RowsIndexed" -> {}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "ColumnsIndexed" -> {}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}, "RowsIndexed" -> {}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellChangeTimes->{3.779627514523004*^9, 3.7796287355930567`*^9, 
  3.7796289471017814`*^9, 3.779629049951582*^9, 3.7796292754906073`*^9, 
  3.7796293241504335`*^9, 3.77962974463892*^9, 3.7796299245580606`*^9, 
  3.7796299636231933`*^9, 3.779800890309637*^9, 3.779801043030364*^9, 
  3.7798091146672287`*^9, 3.779810114241623*^9, 3.779810202500242*^9, 
  3.77981052881623*^9, 3.7798111463638*^9, 3.779811183738634*^9, 
  3.7798112191817217`*^9, 3.7800540005686874`*^9, 3.7800540596424255`*^9}],

Cell[BoxData["\<\"(la.^2+lf.^2+ls.^2+lt.^2+2.*ls.*lt.*cos(y2(t))+2.*la.*ls.*\
cos(y3(t))+2.*la.*lt.*cos(y2(t)+y3(t))+(-2).*lf.*ls.*sin(y3(t))+(-2).*lf.*lt.*\
sin(y2(t)+y3(t))).^(1/2);\\n\"\>"], "Output",
 CellChangeTimes->{3.779627514523004*^9, 3.7796287355930567`*^9, 
  3.7796289471017814`*^9, 3.779629049951582*^9, 3.7796292754906073`*^9, 
  3.7796293241504335`*^9, 3.77962974463892*^9, 3.7796299245580606`*^9, 
  3.7796299636231933`*^9, 3.779800890309637*^9, 3.779801043030364*^9, 
  3.7798091146672287`*^9, 3.779810114241623*^9, 3.779810202500242*^9, 
  3.77981052881623*^9, 3.7798111463638*^9, 3.779811183738634*^9, 
  3.7798112191817217`*^9, 3.7800540005686874`*^9, 3.780054059650401*^9}]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
    RowBox[{"For", " ", "curved", " ", "foot", " ", 
     RowBox[{"model", ":", " ", 
      RowBox[{"R", " ", "is", " ", "foot", " ", "radius"}]}]}], ",", " ", 
    RowBox[{
    "alpha", " ", "is", " ", "radius", " ", "to", " ", "ankle", " ", 
     "offset"}], ",", " ", 
    RowBox[{"beta", " ", "is", " ", "ground", " ", "slope"}]}], "*)"}], 
  "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"theta", " ", "=", " ", 
     RowBox[{
      RowBox[{"(", 
       RowBox[{"alpha", "+", 
        RowBox[{"y3", "[", "t", "]"}], "+", "beta"}], ")"}], "/", "2"}]}], 
    ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"pContact", " ", "=", " ", 
     RowBox[{
      RowBox[{"-", "2"}], "*", "R", "*", 
      RowBox[{"Sin", "[", "theta", "]"}], "*", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"Cos", "[", "theta", "]"}], ",", 
        RowBox[{"Sin", "[", "theta", "]"}], ",", "0"}], "}"}]}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{"MatrixForm", "[", 
    RowBox[{"L3", " ", "=", " ", 
     RowBox[{
      RowBox[{"ComplexExpand", "[", 
       RowBox[{
        RowBox[{"Norm", "[", 
         RowBox[{
          RowBox[{"Hip", "-", "pContact"}], ",", "2"}], "]"}], ",", 
        RowBox[{"y", " ", "\[Element]", "Reals"}]}], "]"}], "//", 
      "FullSimplify"}]}], "]"}], "\[IndentingNewLine]", 
   RowBox[{"MatrixForm", "[", 
    RowBox[{"LJacob3", "=", " ", 
     RowBox[{
      RowBox[{"Transpose", "[", 
       RowBox[{"{", 
        RowBox[{"D", "[", 
         RowBox[{"L3", ",", 
          RowBox[{"Transpose", "[", "y", "]"}]}], "]"}], "}"}], "]"}], "//", 
      "FullSimplify"}]}], "]"}], "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{"LJacob3", "=", " ", 
     RowBox[{"Transpose", "[", 
      RowBox[{"{", 
       RowBox[{"D", "[", 
        RowBox[{"L3", ",", 
         RowBox[{"Transpose", "[", "x", "]"}]}], "]"}], "}"}], "]"}]}], 
    "*)"}]}]}]], "Input",
 CellChangeTimes->{{3.436353983078125*^9, 3.436353991234375*^9}, {
   3.436354181125*^9, 3.43635418390625*^9}, 3.5090404416343727`*^9, {
   3.509539414111295*^9, 3.509539527743894*^9}, 3.509539567648764*^9, {
   3.5095401253128805`*^9, 3.5095401303828897`*^9}, {3.5095401706491876`*^9, 
   3.5095401776848*^9}, {3.520767514421875*^9, 3.520767516734375*^9}, {
   3.520767582609375*^9, 3.520767645375*^9}, {3.5207676989375*^9, 
   3.520767715578125*^9}, {3.5230288115*^9, 3.52302884490625*^9}, {
   3.5431472111331916`*^9, 3.5431472276271915`*^9}, {3.5551550672540536`*^9, 
   3.5551550847125444`*^9}, {3.7354013090469794`*^9, 3.7354013272384634`*^9}, 
   3.735402586068088*^9, {3.7355700991070976`*^9, 3.735570100188266*^9}, 
   3.7366221128014383`*^9, {3.7366221436572127`*^9, 3.736622156672744*^9}, {
   3.736694910091427*^9, 3.736694926553073*^9}, {3.7366949728562174`*^9, 
   3.7366949909853835`*^9}, {3.7366951181023893`*^9, 3.736695130005561*^9}, {
   3.740489951746674*^9, 3.7404899555238447`*^9}, 3.74050757733245*^9, {
   3.740998914667108*^9, 3.740998917544409*^9}, {3.740999028057352*^9, 
   3.74099905490458*^9}, {3.7409994625500927`*^9, 3.740999476116825*^9}, {
   3.763816821368079*^9, 3.763816827176324*^9}, {3.7639205215778227`*^9, 
   3.763920532347257*^9}, 3.7639209083266277`*^9, {3.7639209399431157`*^9, 
   3.7639209584073467`*^9}, {3.763921097511383*^9, 3.7639211041267977`*^9}, {
   3.7639211499771085`*^9, 3.763921285050226*^9}, {3.7639213496851053`*^9, 
   3.7639214124362335`*^9}, {3.7639214671401286`*^9, 
   3.7639215203721623`*^9}, {3.7639216283574257`*^9, 3.763921630372426*^9}, {
   3.7639223522122946`*^9, 3.763922383887144*^9}, {3.763922727069458*^9, 
   3.763922745213709*^9}, {3.763922784824605*^9, 3.7639227988798075`*^9}, {
   3.763922834606544*^9, 3.7639228879338*^9}, {3.763922934552292*^9, 
   3.7639229667018213`*^9}, {3.763923086462696*^9, 3.7639231026690593`*^9}, {
   3.7639887699484334`*^9, 3.763988780923917*^9}, {3.763995404359267*^9, 
   3.763995407352643*^9}, {3.7647641067628584`*^9, 3.7647641240427294`*^9}, {
   3.764764457577089*^9, 3.764764464584691*^9}, {3.764765017335846*^9, 
   3.764765029160233*^9}, {3.764765090775797*^9, 3.7647651282472563`*^9}, {
   3.7647653616387916`*^9, 3.764765472982376*^9}, {3.7658890741253223`*^9, 
   3.7658891104274197`*^9}, {3.7658900673785067`*^9, 3.7658900678512373`*^9}, 
   3.7658901155678177`*^9, {3.766839561124361*^9, 3.766839562436724*^9}, {
   3.766844702008257*^9, 3.766844704872295*^9}, {3.766845995746029*^9, 
   3.766846065440652*^9}, {3.766846568909679*^9, 3.766846659885513*^9}, {
   3.766846763292362*^9, 3.7668467645889173`*^9}, 3.7668468076284885`*^9, {
   3.766847193241349*^9, 3.766847206282116*^9}, {3.7668492625775805`*^9, 
   3.7668492660011363`*^9}, {3.766922509191225*^9, 3.7669225159147863`*^9}, {
   3.7669255042177787`*^9, 3.766925504956279*^9}, {3.7669332982472076`*^9, 
   3.766933301396445*^9}, {3.7669336657518044`*^9, 3.7669336699977665`*^9}, {
   3.766933704982257*^9, 3.7669337147985272`*^9}, {3.7722791583093104`*^9, 
   3.7722791773335705`*^9}, {3.7722792335609226`*^9, 
   3.7722792361810074`*^9}, {3.7722796971865225`*^9, 
   3.7722797379874945`*^9}, {3.7778174380129833`*^9, 3.7778174465951676`*^9}, 
   3.777817931871464*^9, {3.779627207979822*^9, 3.779627254029112*^9}, {
   3.7796274326687984`*^9, 3.7796274878080616`*^9}, 3.7796277936164513`*^9, {
   3.779628140725497*^9, 3.7796281512855353`*^9}, {3.7796282256053896`*^9, 
   3.7796282709223795`*^9}, {3.779629302760543*^9, 3.779629303270918*^9}, {
   3.779629773599036*^9, 3.7796297749189854`*^9}, {3.7798008636061354`*^9, 
   3.7798008705259886`*^9}, {3.779809976994541*^9, 3.7798100222110834`*^9}, {
   3.779810055182533*^9, 3.779810062432216*^9}}],

Cell[BoxData[
 TagBox[
  RowBox[{"2", " ", 
   RowBox[{"Abs", "[", "R", "]"}], " ", 
   RowBox[{"Abs", "[", 
    RowBox[{"Sin", "[", 
     RowBox[{
      FractionBox["1", "2"], " ", 
      RowBox[{"(", 
       RowBox[{"alpha", "+", "beta", "+", 
        RowBox[{"y3", "[", "t", "]"}]}], ")"}]}], "]"}], "]"}]}],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellChangeTimes->{
  3.779627803246756*^9, 3.7796281548502874`*^9, {3.779628238684916*^9, 
   3.7796282775251594`*^9}, 3.7796287852928467`*^9, 3.779628947232173*^9, 
   3.779629050221821*^9, 3.779629283068925*^9, 3.779629324410522*^9, 
   3.779629746158845*^9, 3.7796297792088127`*^9, 3.7796299291179066`*^9, 
   3.7796299661378345`*^9, 3.7798008959206285`*^9, 3.779801048266034*^9, 
   3.7798101184005904`*^9, 3.7798102052289505`*^9, 3.779810530031971*^9, 
   3.7798111469736257`*^9, 3.7798111848792205`*^9, 3.779811220426064*^9, 
   3.7800540017767267`*^9, 3.7800540599266586`*^9}],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {"0"},
     {"0"},
     {
      RowBox[{
       RowBox[{"Abs", "[", "R", "]"}], " ", 
       RowBox[{"Cos", "[", 
        RowBox[{
         FractionBox["1", "2"], " ", 
         RowBox[{"(", 
          RowBox[{"alpha", "+", "beta", "+", 
           RowBox[{"y3", "[", "t", "]"}]}], ")"}]}], "]"}], " ", 
       RowBox[{"Sign", "[", 
        RowBox[{"Sin", "[", 
         RowBox[{
          FractionBox["1", "2"], " ", 
          RowBox[{"(", 
           RowBox[{"alpha", "+", "beta", "+", 
            RowBox[{"y3", "[", "t", "]"}]}], ")"}]}], "]"}], "]"}]}]}
    },
    GridBoxAlignment->{
     "Columns" -> {{Center}}, "ColumnsIndexed" -> {}, "Rows" -> {{Baseline}}, 
      "RowsIndexed" -> {}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "ColumnsIndexed" -> {}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}, "RowsIndexed" -> {}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellChangeTimes->{
  3.779627803246756*^9, 3.7796281548502874`*^9, {3.779628238684916*^9, 
   3.7796282775251594`*^9}, 3.7796287852928467`*^9, 3.779628947232173*^9, 
   3.779629050221821*^9, 3.779629283068925*^9, 3.779629324410522*^9, 
   3.779629746158845*^9, 3.7796297792088127`*^9, 3.7796299291179066`*^9, 
   3.7796299661378345`*^9, 3.7798008959206285`*^9, 3.779801048266034*^9, 
   3.7798101184005904`*^9, 3.7798102052289505`*^9, 3.779810530031971*^9, 
   3.7798111469736257`*^9, 3.7798111848792205`*^9, 3.779811220426064*^9, 
   3.7800540017767267`*^9, 3.780054060145054*^9}]
}, Open  ]]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Export", "Section",
 CellChangeTimes->{{3.511177531124222*^9, 3.511177531860264*^9}}],

Cell[BoxData[{
 RowBox[{"Clear", "[", "y", "]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"{", 
   RowBox[{
    RowBox[{
     RowBox[{"y1", "[", "t", "]"}], ":=", 
     RowBox[{"y", "[", "1", "]"}]}], ",", " ", 
    RowBox[{
     RowBox[{"y2", "[", "t", "]"}], ":=", 
     RowBox[{"y", "[", "2", "]"}]}], ",", " ", 
    RowBox[{
     RowBox[{"y3", "[", "t", "]"}], ":=", 
     RowBox[{"y", "[", "3", "]"}]}], ",", " ", 
    RowBox[{
     RowBox[{"y4", "[", "t", "]"}], ":=", 
     RowBox[{"y", "[", "4", "]"}]}], ",", 
    RowBox[{
     RowBox[{"y5", "[", "t", "]"}], ":=", 
     RowBox[{"y", "[", "5", "]"}]}], ",", 
    RowBox[{
     RowBox[{"y6", "[", "t", "]"}], ":=", 
     RowBox[{"y", "[", "6", "]"}]}], ",", 
    RowBox[{
     RowBox[{"y7", "[", "t", "]"}], ":=", 
     RowBox[{"y", "[", "7", "]"}]}], ",", 
    RowBox[{
     RowBox[{"y8", "[", "t", "]"}], ":=", 
     RowBox[{"y", "[", "8", "]"}]}], ",", 
    RowBox[{
     RowBox[{
      RowBox[{"y1", "'"}], "[", "t", "]"}], ":=", 
     RowBox[{"y", "[", "9", "]"}]}], ",", " ", 
    RowBox[{
     RowBox[{
      RowBox[{"y2", "'"}], "[", "t", "]"}], ":=", 
     RowBox[{"y", "[", "10", "]"}]}], ",", " ", 
    RowBox[{
     RowBox[{
      RowBox[{"y3", "'"}], "[", "t", "]"}], ":=", 
     RowBox[{"y", "[", "11", "]"}]}], ",", " ", 
    RowBox[{
     RowBox[{
      RowBox[{"y4", "'"}], "[", "t", "]"}], ":=", 
     RowBox[{"y", "[", "12", "]"}]}], ",", " ", 
    RowBox[{
     RowBox[{
      RowBox[{"y5", "'"}], "[", "t", "]"}], ":=", 
     RowBox[{"y", "[", "13", "]"}]}], ",", " ", 
    RowBox[{
     RowBox[{
      RowBox[{"y6", "'"}], "[", "t", "]"}], ":=", 
     RowBox[{"y", "[", "14", "]"}]}], ",", " ", 
    RowBox[{
     RowBox[{
      RowBox[{"y7", "'"}], "[", "t", "]"}], ":=", 
     RowBox[{"y", "[", "15", "]"}]}], ",", 
    RowBox[{
     RowBox[{
      RowBox[{"y8", "'"}], "[", "t", "]"}], ":=", 
     RowBox[{"y", "[", "16", "]"}]}], ",", 
    RowBox[{
     RowBox[{
      RowBox[{"y1", "''"}], "[", "t", "]"}], ":=", 
     RowBox[{"a", "[", "1", "]"}]}], ",", " ", 
    RowBox[{
     RowBox[{
      RowBox[{"y2", "''"}], "[", "t", "]"}], ":=", 
     RowBox[{"a", "[", "2", "]"}]}], ",", " ", 
    RowBox[{
     RowBox[{
      RowBox[{"y3", "''"}], "[", "t", "]"}], ":=", 
     RowBox[{"a", "[", "3", "]"}]}], ",", 
    RowBox[{
     RowBox[{
      RowBox[{"y4", "''"}], "[", "t", "]"}], ":=", 
     RowBox[{"a", "[", "4", "]"}]}], ",", 
    RowBox[{
     RowBox[{
      RowBox[{"y5", "''"}], "[", "t", "]"}], ":=", 
     RowBox[{"a", "[", "5", "]"}]}], ",", 
    RowBox[{
     RowBox[{
      RowBox[{"y6", "''"}], "[", "t", "]"}], ":=", 
     RowBox[{"a", "[", "6", "]"}]}], ",", 
    RowBox[{
     RowBox[{
      RowBox[{"y7", "''"}], "[", "t", "]"}], ":=", 
     RowBox[{"a", "[", "7", "]"}]}], ",", 
    RowBox[{
     RowBox[{
      RowBox[{"y8", "''"}], "[", "t", "]"}], ":=", 
     RowBox[{"a", "[", "8", "]"}]}]}], "}"}], ";"}]}], "Input",
 CellChangeTimes->{{3.523274663953125*^9, 3.5232746810625*^9}, {
   3.52327495384375*^9, 3.5232750456875*^9}, {3.5232901581875*^9, 
   3.523290214203125*^9}, {3.523380407609375*^9, 3.52338042590625*^9}, {
   3.523380594984375*^9, 3.523380620390625*^9}, {3.538749586056141*^9, 
   3.5387495922311406`*^9}, {3.538835825326691*^9, 3.538835847437691*^9}, {
   3.5431437314051914`*^9, 3.5431437394361916`*^9}, {3.543928827586776*^9, 
   3.5439288325927753`*^9}, {3.5550941946856728`*^9, 
   3.5550942017716727`*^9}, {3.5550942703126726`*^9, 3.555094363648673*^9}, {
   3.555178321819333*^9, 3.555178343561333*^9}, {3.5551783963133335`*^9, 
   3.5551784047093334`*^9}, {3.5553271072898808`*^9, 3.55532714308346*^9}, {
   3.5558698844658337`*^9, 3.5558698887528334`*^9}, {3.5558699258888335`*^9, 
   3.5558699260948334`*^9}, 3.7404899945838785`*^9, 3.763985685557726*^9, {
   3.766839059428672*^9, 3.7668390599897084`*^9}, 3.7668476276088934`*^9, {
   3.766855781789193*^9, 3.7668557985722*^9}, {3.7668571709820786`*^9, 
   3.766857216438575*^9}, {3.7668578392979937`*^9, 3.766857879684413*^9}, {
   3.7778168024551315`*^9, 3.777816803045433*^9}, {3.7778174695229225`*^9, 
   3.77781746976779*^9}, {3.777817949380939*^9, 3.777817958461069*^9}, {
   3.777918448666876*^9, 3.777918492002409*^9}, {3.7798110979272223`*^9, 
   3.7798111180989933`*^9}}],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"ToMatlab", "[", "L1", "]"}], "\[IndentingNewLine]", 
 RowBox[{"ToMatlab", "[", "LJacob1", "]"}]}], "Input",
 CellChangeTimes->{{3.7796272312590103`*^9, 3.7796272439495764`*^9}, 
   3.779627492678239*^9, 3.779627796786601*^9, {3.7798111618639994`*^9, 
   3.779811164817444*^9}}],

Cell[BoxData["\<\"(la.^2+lf.^2+ls.^2+lt.^2+2.*ls.*lt.*cos(y(2))+2.*la.*ls.*\
cos(y(3))+2.*la.*lt.*cos(y(2)+y(3))+(-2).*lf.*ls.*sin(y(3))+(-2).*lf.*lt.*sin(\
y(2)+y(3))).^(1/2);\\n\"\>"], "Output",
 CellChangeTimes->{3.780054002002051*^9, 3.780054060226835*^9}],

Cell[BoxData["\<\"[0;(-1).*lt.*(lf.*cos(y(2)+y(3))+ls.*sin(y(2))+la.*sin(y(2)+\
y(3))).*(la.^2+lf.^2+ls.^2+lt.^2+2.*ls.*lt.*cos(y(2))+2.*la.*ls.*cos(y(3))+2.*\
la.*lt.*cos(y(2)+y(3))+(-2).*lf.*ls.*sin(y(3))+(-2).*lf.*lt.*sin(y(2)+y(3))).^\
(-1/2);(-1).*(lf.*ls.*cos(y(3))+lf.*lt.*cos(y(2)+y(3))+la.*ls.*sin(y(3))+la.*\
lt.*sin(y(2)+y(3))).*(la.^2+lf.^2+ls.^2+lt.^2+2.*ls.*lt.*cos(y(2))+2.*la.*ls.*\
cos(y(3))+2.*la.*lt.*cos(y(2)+y(3))+(-2).*lf.*ls.*sin(y(3))+(-2).*lf.*lt.*sin(\
y(2)+y(3))).^(-1/2)];\\n\"\>"], "Output",
 CellChangeTimes->{3.780054002002051*^9, 3.7800540602308254`*^9}]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{
   "\"\<(la.^2+lf.^2+ls.^2+lt.^2+2.*ls.*lt.*cos(y(2))+2.*la.*ls.*cos(y(3))+2.*\
la.*lt.*cos(y(2)+y(3))+(-2).*lf.*ls.*sin(y(3))+(-2).*lf.*lt.*sin(y(2)+y(3))).^\
(1/2);\\n\>\"", "toplevelfolder"}], " ", "=", " ", 
   "\"\<Z:\\\\Member Folders\\\\Mark \
Yeatman\\\\Codes\\\\Matlab\\\\StandardizedCode\\\\Derivations\\\\\
ToMatlabOutputs\\\\\>\""}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"configfolder", " ", "=", " ", 
  "\"\<ProsthesisHipFrame\\\\\>\""}], "\n", 
 RowBox[{
  RowBox[{"folder", " ", "=", " ", 
   RowBox[{"StringJoin", "[", 
    RowBox[{
    "toplevelfolder", ",", "configfolder", ",", 
     "\"\<KinematicFunctions\\\\\>\""}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{"With", "[", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{"dirname", "=", "folder"}], "}"}], ",", 
   RowBox[{"Switch", "[", 
    RowBox[{
     RowBox[{"FileType", "[", "dirname", "]"}], ",", "None", ",", 
     RowBox[{"CreateDirectory", "[", "dirname", "]"}], " ", 
     RowBox[{"(*", 
      RowBox[{"create", " ", "dir"}], "*)"}], ",", "Directory", ",", "Null", 
     " ", 
     RowBox[{"(*", 
      RowBox[{"do", " ", "nothing"}], "*)"}], ",", "File", ",", 
     RowBox[{
     "Print", "[", "\"\<File with same name already exists!!\>\"", "]"}]}], 
    " ", 
    RowBox[{"(*", 
     RowBox[{"error", "!"}], "*)"}], "]"}]}], "]"}], "\n", 
 RowBox[{"WriteMatlab", "[", 
  RowBox[{"L1", ",", 
   RowBox[{"StringJoin", "[", 
    RowBox[{"folder", ",", "\"\<SpringLengthFlatHip.m\>\""}], "]"}], ",", 
   "LFlatHip"}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"WriteMatlab", "[", 
  RowBox[{"LJacob1", ",", 
   RowBox[{"StringJoin", "[", 
    RowBox[{"folder", ",", "\"\<SpringJacobianFlatHip.m\>\""}], "]"}], ",", 
   "LJacobFlatHip"}], "]"}]}], "Input",
 CellChangeTimes->{{3.780053951207141*^9, 3.7800540090570803`*^9}, 
   3.7800545134536676`*^9}],

Cell[BoxData[
 RowBox[{
  StyleBox[
   RowBox[{"Set", "::", "write"}], "MessageName"], 
  RowBox[{
  ":", " "}], "\<\"Tag \
\[NoBreak]\\!\\(\\*RowBox[{\\\"Times\\\"}]\\)\[NoBreak] in \
\[NoBreak]\\!\\(\\*RowBox[{\\\"\\\\\\\"(la.^2+lf.^2+ls.^2+lt.^2+2.*ls.*lt.*\
cos(y(2))+2.*la.*ls.*cos(y(3))+2.*la.*lt.*cos(y(2)+y(3))+(-2).*lf.*ls.*sin(y(\
3))+(-2).*lf.*lt.*sin(y(2)+y(3))).^(1/2);\\\\\\\\n\\\\\\\"\\\", \\\" \\\", \\\
\"\\\\\\\"Z:\\\\\\\\\\\\\\\\Member Folders\\\\\\\\\\\\\\\\Mark \
Yeatman\\\\\\\\\\\\\\\\Codes\\\\\\\\\\\\\\\\Matlab\\\\\\\\\\\\\\\\\
StandardizedCode\\\\\\\\\\\\\\\\Derivations\\\\\\\\\\\\\\\\ToMatlabOutputs\\\\\
\\\\\\\\\\\\\\\\\\\"\\\"}]\\)\[NoBreak] is Protected. \\!\\(\\*ButtonBox[\\\"\
\[RightSkeleton]\\\", ButtonStyle->\\\"Link\\\", ButtonFrame->None, \
ButtonData:>\\\"paclet:ref/message/General/write\\\", ButtonNote -> \
\\\"Set::write\\\"]\\)\"\>"}]], "Message", "MSG",
 CellChangeTimes->{3.7800540020629387`*^9, 3.7800540603355446`*^9}],

Cell[BoxData["\<\"ProthesisHipFrame\\\\\"\>"], "Output",
 CellChangeTimes->{3.7798111850981197`*^9, 3.7798112206291428`*^9, 
  3.7800540020738993`*^9, 3.7800540603385363`*^9}],

Cell[BoxData["\<\"Z:\\\\Member Folders\\\\Mark \
Yeatman\\\\Codes\\\\Matlab\\\\StandardizedCode\\\\Derivations\\\\\
ToMatlabOutputs\\\\ProthesisHipFrame\\\\KinematicFunctions\\\\\"\>"], "Output",
 CellChangeTimes->{3.7798111850981197`*^9, 3.7798112206291428`*^9, 
  3.7800540020738993`*^9, 3.7800540603584824`*^9}]
}, Open  ]],

Cell[BoxData[
 RowBox[{
  RowBox[{"Unset", "[", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"y1", "[", "t", "]"}], ",", " ", 
     RowBox[{"y2", "[", "t", "]"}], ",", " ", 
     RowBox[{"y3", "[", "t", "]"}], ",", " ", 
     RowBox[{"y4", "[", "t", "]"}], ",", 
     RowBox[{"y5", "[", "t", "]"}], ",", 
     RowBox[{"y6", "[", "t", "]"}], ",", 
     RowBox[{
      RowBox[{"y1", "'"}], "[", "t", "]"}], ",", " ", 
     RowBox[{
      RowBox[{"y2", "'"}], "[", "t", "]"}], ",", " ", 
     RowBox[{
      RowBox[{"y3", "'"}], "[", "t", "]"}], ",", " ", 
     RowBox[{
      RowBox[{"y4", "'"}], "[", "t", "]"}], ",", " ", 
     RowBox[{
      RowBox[{"y5", "'"}], "[", "t", "]"}], ",", 
     RowBox[{
      RowBox[{"y6", "'"}], "[", "t", "]"}], ",", " ", 
     RowBox[{
      RowBox[{"y1", "''"}], "[", "t", "]"}], ",", " ", 
     RowBox[{
      RowBox[{"y2", "''"}], "[", "t", "]"}], ",", " ", 
     RowBox[{
      RowBox[{"y3", "''"}], "[", "t", "]"}], ",", 
     RowBox[{
      RowBox[{"y4", "''"}], "[", "t", "]"}], ",", 
     RowBox[{
      RowBox[{"y5", "''"}], "[", "t", "]"}], ",", 
     RowBox[{
      RowBox[{"y6", "''"}], "[", "t", "]"}]}], "}"}], "]"}], ";"}]], "Input",
 CellChangeTimes->{{3.766934307338765*^9, 3.7669344074321623`*^9}, {
  3.7798111314581003`*^9, 3.77981113483311*^9}}]
}, Open  ]]
}, Open  ]]
},
WindowSize->{1920, 997},
WindowMargins->{{1912, Automatic}, {Automatic, -6}},
PrintingCopies->1,
PrintingPageRange->{Automatic, Automatic},
PrivateNotebookOptions->{"VersionedStylesheet"->{"Default.nb"[8.] -> False}},
ShowSelection->True,
FrontEndVersion->"10.4 for Microsoft Windows (64-bit) (February 25, 2016)",
StyleDefinitions->"Default.nb"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[CellGroupData[{
Cell[567, 22, 504, 10, 81, "Subsubtitle"],
Cell[CellGroupData[{
Cell[1096, 36, 279, 4, 70, "Section"],
Cell[1378, 42, 1037, 31, 172, "Input"]
}, Open  ]],
Cell[CellGroupData[{
Cell[2452, 78, 255, 3, 70, "Section"],
Cell[2710, 83, 3161, 65, 92, "Input"],
Cell[5874, 150, 6268, 165, 372, "Input"],
Cell[CellGroupData[{
Cell[12167, 319, 8523, 215, 412, "Input"],
Cell[20693, 536, 687, 20, 31, "Output"]
}, Open  ]],
Cell[21395, 559, 4579, 119, 372, "Input"]
}, Open  ]],
Cell[CellGroupData[{
Cell[26011, 683, 213, 3, 70, "Section"],
Cell[CellGroupData[{
Cell[26249, 690, 260, 3, 39, "Subsubsection"],
Cell[CellGroupData[{
Cell[26534, 697, 3253, 74, 152, "Input"],
Cell[29790, 773, 1814, 45, 31, "Output"],
Cell[31607, 820, 4249, 110, 72, "Output"],
Cell[35859, 932, 753, 12, 31, "Output"],
Cell[36615, 946, 1714, 42, 75, "Output"]
}, Open  ]],
Cell[38344, 991, 3379, 46, 31, "Input"],
Cell[CellGroupData[{
Cell[41748, 1041, 4478, 75, 92, "Input"],
Cell[46229, 1118, 1628, 40, 55, "Output"],
Cell[47860, 1160, 4800, 126, 190, "Output"],
Cell[52663, 1288, 3205, 87, 81, "Output"],
Cell[55871, 1377, 745, 11, 52, "Output"]
}, Open  ]],
Cell[CellGroupData[{
Cell[56653, 1393, 4105, 66, 52, "Input"],
Cell[60761, 1461, 1516, 36, 55, "Output"],
Cell[62280, 1499, 4627, 118, 190, "Output"]
}, Open  ]],
Cell[CellGroupData[{
Cell[66944, 1622, 5156, 91, 132, "Input"],
Cell[72103, 1715, 2106, 54, 31, "Output"],
Cell[74212, 1771, 873, 13, 52, "Output"],
Cell[75088, 1786, 1904, 43, 55, "Output"],
Cell[76995, 1831, 507, 10, 23, "Message"],
Cell[77505, 1843, 931, 17, 45, "Output"],
Cell[78439, 1862, 3535, 91, 81, "Output"]
}, Open  ]]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[82035, 1960, 91, 1, 70, "Section"],
Cell[82129, 1963, 3564, 89, 72, "Input"],
Cell[CellGroupData[{
Cell[85718, 2056, 299, 5, 52, "Input"],
Cell[86020, 2063, 340, 5, 52, "Output"],
Cell[86363, 2070, 662, 9, 92, "Output"]
}, Open  ]],
Cell[CellGroupData[{
Cell[87062, 2084, 1944, 30, 52, "Input"],
Cell[89009, 2116, 224, 3, 31, "Output"]
}, Open  ]],
Cell[89248, 2122, 887, 25, 52, "Input"],
Cell[90138, 2149, 815, 18, 72, "Input"],
Cell[CellGroupData[{
Cell[90978, 2171, 1766, 24, 31, "Input"],
Cell[92747, 2197, 125, 1, 31, "Output"]
}, Open  ]],
Cell[92887, 2201, 887, 25, 52, "Input"],
Cell[93777, 2228, 1192, 23, 112, "Input"],
Cell[CellGroupData[{
Cell[94994, 2255, 1249, 35, 31, "Input"],
Cell[96246, 2292, 595, 12, 23, "Message"],
Cell[96844, 2306, 672, 14, 23, "Message"]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[97565, 2326, 263, 3, 70, "Section"],
Cell[97831, 2331, 2855, 56, 92, "Input"],
Cell[100689, 2389, 3734, 81, 152, "Input"],
Cell[104426, 2472, 5698, 130, 272, "Input"],
Cell[CellGroupData[{
Cell[110149, 2606, 2211, 56, 212, "Input"],
Cell[112363, 2664, 3104, 86, 78, "Output"]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[115516, 2756, 213, 3, 70, "Section"],
Cell[CellGroupData[{
Cell[115754, 2763, 260, 3, 39, "Subsubsection"],
Cell[116017, 2768, 1513, 27, 52, "Input"],
Cell[CellGroupData[{
Cell[117555, 2799, 4271, 69, 72, "Input"],
Cell[121829, 2870, 1485, 35, 41, "Output"],
Cell[123317, 2907, 4540, 112, 101, "Output"],
Cell[127860, 3021, 695, 9, 52, "Output"]
}, Open  ]],
Cell[CellGroupData[{
Cell[128592, 3035, 5691, 107, 132, "Input"],
Cell[134286, 3144, 960, 21, 55, "Output"],
Cell[135249, 3167, 1700, 42, 72, "Output"]
}, Open  ]]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[137010, 3216, 91, 1, 70, "Section"],
Cell[137104, 3219, 4272, 111, 72, "Input"],
Cell[CellGroupData[{
Cell[141401, 3334, 302, 5, 52, "Input"],
Cell[141706, 3341, 260, 3, 52, "Output"],
Cell[141969, 3346, 586, 7, 92, "Output"]
}, Open  ]],
Cell[CellGroupData[{
Cell[142592, 3358, 1886, 48, 152, "Input"],
Cell[144481, 3408, 969, 17, 40, "Message"],
Cell[145453, 3427, 175, 2, 31, "Output"],
Cell[145631, 3431, 314, 4, 31, "Output"]
}, Open  ]],
Cell[145960, 3438, 1299, 36, 31, "Input"]
}, Open  ]]
}, Open  ]]
}
]
*)

